{
	"name": "core",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "global"
		},
		{
			"eventType": "variable",
			"name": "INTERACT_COOLDOWN",
			"type": "number",
			"initialValue": "0.3",
			"comment": "How frequently (in seconds) to let the player interact with things.",
			"isStatic": false,
			"isConstant": true,
			"sid": 319367684950517
		},
		{
			"eventType": "variable",
			"name": "ANIMATION_DIVISOR",
			"type": "number",
			"initialValue": "7",
			"comment": "number by which to divide the movement speed to obtain the animation speed",
			"isStatic": false,
			"isConstant": true,
			"sid": 274670126082924
		},
		{
			"eventType": "variable",
			"name": "TICKS_PER_SECOND",
			"type": "number",
			"initialValue": "60",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 884640693658179
		},
		{
			"eventType": "variable",
			"name": "ARC",
			"type": "number",
			"initialValue": "22.5",
			"comment": "The number of degrees in a circle divided by the number of angles our assets have.",
			"isStatic": false,
			"isConstant": true,
			"sid": 363141446243930
		},
		{
			"eventType": "variable",
			"name": "QUARTER_CIRCLE",
			"type": "number",
			"initialValue": "90",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 883872539904860
		},
		{
			"eventType": "variable",
			"name": "HALF_CIRCLE",
			"type": "number",
			"initialValue": "180",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 192320948206579
		},
		{
			"eventType": "variable",
			"name": "ISOMETRIC_DIVIDER",
			"type": "number",
			"initialValue": "3",
			"comment": "The number by which to divide projectile's and character's height to be properly isometric",
			"isStatic": false,
			"isConstant": true,
			"sid": 449892706850942
		},
		{
			"eventType": "variable",
			"name": "PERCENTAGE_DIVIDER",
			"type": "number",
			"initialValue": "100",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 444792278907568
		},
		{
			"eventType": "variable",
			"name": "nextAvailableIdentifier",
			"type": "number",
			"initialValue": "5",
			"comment": "Stores the next available identifier, to be assigned to equipment",
			"isStatic": false,
			"isConstant": false,
			"sid": 995721705060518
		},
		{
			"eventType": "variable",
			"name": "uidOfClicked",
			"type": "number",
			"initialValue": "0",
			"comment": "the UID of the out-of-range object that was clicked",
			"isStatic": false,
			"isConstant": false,
			"sid": 849112042530215
		},
		{
			"eventType": "variable",
			"name": "dataLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 541734374862868
		},
		{
			"eventType": "variable",
			"name": "characterLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 110986848731057
		},
		{
			"eventType": "variable",
			"name": "npcsLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 313952944655562
		},
		{
			"eventType": "variable",
			"name": "enemiesLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 133692535627532
		},
		{
			"eventType": "variable",
			"name": "abilitiesLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 107174281886995
		},
		{
			"eventType": "variable",
			"name": "isOnInteractCooldown",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 822176132467234
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "npc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "dialogOpen",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Whether or not the player is talking to an NPC",
					"isStatic": true,
					"isConstant": false,
					"sid": 716778298221880
				},
				{
					"eventType": "variable",
					"name": "portraitPosition",
					"type": "number",
					"initialValue": "1280",
					"comment": "The position on the X axis of where the portrait should spawn",
					"isStatic": false,
					"isConstant": true,
					"sid": 795195881715473
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 993880984395056,
							"parameters": {
								"tag": "\"startLoading\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "TODO: Make sure this works with multiple NPCs",
							"background-color": [
								1,
								1,
								0,
								1
							]
						}
					],
					"sid": 295343820530030,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 140298723926199,
									"parameters": {
										"object": "npc"
									}
								}
							],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 822601046469838,
									"parameters": {
										"object-name": "npc.simpleName",
										"layer": "\"main\"",
										"x": "npc.X",
										"y": "npc.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 613276139234650
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 465897373035454,
									"parameters": {
										"object": "npcBody"
									}
								}
							],
							"actions": [
								{
									"id": "add-child",
									"objectClass": "npc",
									"sid": 101586874540849,
									"parameters": {
										"child": "npcBody",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								}
							],
							"sid": 508832258388582
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 549925325490944,
									"parameters": {
										"variable": "npcsLoaded",
										"value": "true"
									}
								}
							],
							"sid": 138806220413212
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "npc",
							"sid": 886572544963710,
							"parameters": {
								"object": "player"
							}
						}
					],
					"actions": [
						{
							"id": "push-out-solid",
							"objectClass": "player",
							"sid": 947588256996462,
							"behaviorType": "Custom",
							"parameters": {
								"direction": "nearest"
							}
						}
					],
					"sid": 102494875690120
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "mouse",
							"sid": 919419578550358,
							"parameters": {
								"mouse-button": "left"
							}
						},
						{
							"id": "mouse-button-is-down",
							"objectClass": "mouse",
							"sid": 647126079709070,
							"parameters": {
								"mouse-button": "right"
							}
						}
					],
					"actions": [],
					"sid": 607267948456563,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 671569229951174,
									"parameters": {
										"object": "npcBody"
									},
									"isInverted": true
								},
								{
									"id": "is-playing",
									"objectClass": "portrait",
									"sid": 256641828168431,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"fadeOut\""
									},
									"isInverted": true
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 849051413122214,
									"parameters": {
										"first-value": "portrait.Count",
										"comparison": 1,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if we click anywhere that's not an NPC, and there's a portrait up (that's not currently fading out), close the dialog"
								},
								{
									"callFunction": "closeDialog",
									"sid": 797106228050498
								}
							],
							"sid": 507640600485547
						}
					],
					"isOrBlock": true
				},
				{
					"functionName": "beginDialog",
					"functionDescription": "Begin dialog with an NPC.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "npc",
							"sid": 386518271357204,
							"parameters": {
								"instance-variable": "degrees",
								"value": "round(angle(Self.X, Self.Y, player.X, player.Y) / ARC) * ARC"
							}
						},
						{
							"id": "set-text",
							"objectClass": "dialogNpcName",
							"sid": 223028431246540,
							"parameters": {
								"text": "lowercase(npc.fullName)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "dialogText",
							"sid": 430213232029680,
							"parameters": {
								"text": "Functions.arrayLookup(npcDialogArray.ObjectTypeName, \"npc\", npc.simpleName, \"message\")"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 425548883981783,
							"parameters": {
								"seconds": "0"
							}
						},
						{
							"callFunction": "openLayer",
							"sid": 270572504417913,
							"parameters": [
								"\"dialog\""
							]
						}
					],
					"sid": 484500702457343,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "npc",
									"sid": 515856323861255,
									"parameters": {
										"instance-variable": "degrees",
										"comparison": 0,
										"value": "-180"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "npc",
									"sid": 514409863397689,
									"parameters": {
										"instance-variable": "degrees",
										"value": "HALF_CIRCLE"
									}
								}
							],
							"sid": 597617901621374
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "npcBody",
									"sid": 768490635337084,
									"parameters": {
										"animation": "\"idle_\" & npc.degrees",
										"from": "current-frame"
									}
								},
								{
									"callFunction": "updateFacing",
									"sid": 880255149662395,
									"parameters": [
										"npc.X",
										"npc.Y"
									]
								},
								{
									"callFunction": "updateAnimations",
									"sid": 463287089790000,
									"parameters": [
										"\"idle\"",
										"body.OriginalAnimationSpeed",
										"\"playFromCurrentFrame\""
									]
								}
							],
							"sid": 208162397307165
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 842439206812513,
									"parameters": {
										"object": "portrait",
										"expression": "portrait.ObjectTypeName",
										"comparison": 0,
										"value": "npc.simpleName & \"_portrait\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "...if a portrait for it already exists, do nothing"
								}
							],
							"sid": 688346724396258
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 536658391597305
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "â€¦otherwise, destroy all portraits, and spawn a portrait for this NPC"
								},
								{
									"id": "destroy",
									"objectClass": "portrait",
									"sid": 440104141978882
								},
								{
									"id": "unload-object-images",
									"objectClass": "System",
									"sid": 516502329102582,
									"parameters": {
										"object": "portrait"
									}
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 178316045937466,
									"parameters": {
										"object-name": "npc.simpleName & \"_portrait\"",
										"layer": "\"portraits\"",
										"x": "portraitPosition",
										"y": "ViewportBottom(\"portraits\")",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 157694837587103,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 617325792886852,
											"parameters": {
												"object": "portrait"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "parent it to the mana cover so it resizes correctly. We would use anchor, but we can't set its parameters during the runtime"
										},
										{
											"id": "add-child",
											"objectClass": "manaCover",
											"sid": 366581371143765,
											"parameters": {
												"child": "portrait",
												"transform-x": true,
												"transform-y": true,
												"transform-w": false,
												"transform-h": false,
												"transform-a": false,
												"transform-o": false,
												"transform-z-elevation": false,
												"transform-visibility": false,
												"destroy-with-parent": false
											}
										},
										{
											"type": "comment",
											"text": "override the global timescale so we can still fade out on pause"
										},
										{
											"id": "set-object-time-scale",
											"objectClass": "System",
											"sid": 385369070145994,
											"parameters": {
												"object": "portrait",
												"time-scale": "1.0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "portrait",
											"sid": 223827504388620,
											"parameters": {
												"opacity": "0"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "portrait",
											"sid": 940792261109528,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": ".2",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 487290881549409
								}
							]
						}
					]
				},
				{
					"functionName": "closeDialog",
					"functionDescription": "End dialog with an NPC.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "portrait",
							"sid": 167889325032600,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"fadeOut\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": ".2",
								"ease": "noease",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 342685698941577
						},
						{
							"callFunction": "closeLayer",
							"sid": 452768771181338,
							"parameters": [
								"\"dialog\""
							]
						},
						{
							"id": "unload-object-images",
							"objectClass": "System",
							"sid": 659778460881200,
							"parameters": {
								"object": "portrait"
							}
						}
					],
					"sid": 396375011211115
				}
			],
			"sid": 217312584951758
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "equipment",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "swapID",
					"type": "number",
					"initialValue": "0",
					"comment": "the identifier of the equipped item, so we can swap it",
					"isStatic": true,
					"isConstant": false,
					"sid": 841899330934363
				},
				{
					"eventType": "variable",
					"name": "swapSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the original slot in a swap",
					"isStatic": true,
					"isConstant": false,
					"sid": 592861658035522
				},
				{
					"eventType": "variable",
					"name": "draggedOriginSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot the drag originated from",
					"isStatic": true,
					"isConstant": false,
					"sid": 201307089918324
				},
				{
					"eventType": "variable",
					"name": "dragCacheItemUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the item we're dragging",
					"isStatic": true,
					"isConstant": false,
					"sid": 298078267734463
				},
				{
					"eventType": "variable",
					"name": "dragCacheSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot we dropped on",
					"isStatic": true,
					"isConstant": false,
					"sid": 422173916162530
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "loot",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "keyboard",
									"sid": 704807057576814,
									"parameters": {
										"key": 83
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Development: so we can spawn loot quickly",
									"text-color": [
										1,
										1,
										1,
										1
									],
									"background-color": [
										0,
										0,
										1,
										1
									]
								},
								{
									"callFunction": "spawnLoot",
									"sid": 642323707189951,
									"parameters": [
										"player.X",
										"player.Y"
									]
								}
							],
							"sid": 349355571470231
						},
						{
							"functionName": "pickUpLoot",
							"functionDescription": "Picking up loot and turning it into an item",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 369764335379107,
									"parameters": {
										"variable": "isOnInteractCooldown",
										"value": "true"
									}
								}
							],
							"sid": 653257849123262,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "autoEquip",
											"sid": 699016538599260
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 132160082475010,
											"parameters": {
												"value": "find(loot.classRestrictions, player.class) <> -1 | findCase(loot.classRestrictions, \"All Classes\") <> - 1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 730282754581605,
											"parameters": {
												"instance-variable": "level",
												"comparison": 5,
												"value": "loot.level"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 664728702172861,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "loot.type"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 492799500541261,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 452173619109154,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is enabled, and the player's class matches the loot's restrictions, pick the first empty slot matching the loot's type, and spawn the item there"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 330878443862984,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"characterMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 417026782949109,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 958412799812861,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "setItemVariables",
													"sid": 578892715081229
												},
												{
													"callFunction": "queueGearManagement",
													"sid": 389861615475309
												},
												{
													"callFunction": "manageMods",
													"sid": 975152866924711,
													"parameters": [
														true
													]
												}
											],
											"sid": 323602104316470
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 341369713051807
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 740204793762600,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"none\""
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 772858798512530,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 196356171794867,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is disabled, or there's no empty slots matching the item's type, spawn the item in the first empty inventory slot."
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 885272990136247,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"inventoryMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 658192619640202,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 483526905581318,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "setItemVariables",
													"sid": 356730110629027
												}
											],
											"sid": 319164556849852
										}
									]
								}
							]
						},
						{
							"functionName": "setItemVariables",
							"functionDescription": "set the variables on an item, from its loot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 695618123166718,
									"parameters": {
										"instance-variable": "identifier",
										"value": "loot.identifier"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 894947352405585,
									"parameters": {
										"instance-variable": "simpleName",
										"value": "loot.simpleName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 682567391690132,
									"parameters": {
										"instance-variable": "fullName",
										"value": "loot.fullName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 112068630443208,
									"parameters": {
										"instance-variable": "type",
										"value": "loot.type"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 728841582247601,
									"parameters": {
										"instance-variable": "lore",
										"value": "loot.lore"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 358574228575891,
									"parameters": {
										"instance-variable": "level",
										"value": "loot.level"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 904449258452233,
									"parameters": {
										"instance-variable": "mods",
										"value": "loot.mods"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 968287328115240,
									"parameters": {
										"instance-variable": "classRestrictions",
										"value": "loot.classRestrictions"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 701634170777121,
									"parameters": {
										"instance-variable": "modTable",
										"value": "loot.modTable"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 818920739961129,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 418593601200365,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "destroy",
									"objectClass": "loot",
									"sid": 354827222227349
								}
							],
							"sid": 441193875115599,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 666223508174307,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 168572126852132,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 581771949495265
								}
							]
						},
						{
							"functionName": "spawnLoot",
							"functionDescription": "spawn loot at the specified location",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 839401055522675
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 508129132310762
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 210734168625939,
									"parameters": {
										"object-name": "advancedRandom.WeightedByName(\"equipment\") & \"_loot\"",
										"layer": "\"background\"",
										"x": "x",
										"y": "y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 144578606465063,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 608751264424369,
											"parameters": {
												"object": "loot"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "loot",
											"sid": 874150850325430,
											"parameters": {
												"animation": "\"static_\" & (floor(random(1, 17)) * ARC) - HALF_CIRCLE",
												"from": "beginning"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 500570871920815,
											"parameters": {
												"instance-variable": "identifier",
												"value": "nextAvailableIdentifier"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 292727294235481,
											"parameters": {
												"variable": "nextAvailableIdentifier",
												"value": "1"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 937896836624100,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "tokenat(loot.ObjectTypeName, 0, \"_\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 387156835177166,
											"parameters": {
												"instance-variable": "fullName",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fullName\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 740584911958729,
											"parameters": {
												"instance-variable": "type",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"type\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 360927318720871,
											"parameters": {
												"instance-variable": "lore",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"lore\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 992658870893090,
											"parameters": {
												"instance-variable": "level",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"level\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 431466943186454,
											"parameters": {
												"instance-variable": "classRestrictions",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"classRestrictions\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 181518222104383,
											"parameters": {
												"instance-variable": "modTable",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"modTable\")"
											}
										}
									],
									"sid": 365625576088734,
									"children": [
										{
											"eventType": "variable",
											"name": "mod",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 246965271765553
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 448899714769576,
													"parameters": {
														"count": "round(random(1,4))"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 446693176521729,
													"parameters": {
														"variable": "mod",
														"value": "advancedRandom.WeightedByName(loot.modTable)"
													}
												},
												{
													"id": "add-to-instvar",
													"objectClass": "loot",
													"sid": 696283491550463,
													"parameters": {
														"instance-variable": "mods",
														"value": "mod &  \":\" & Functions.arrayLookup(modsArray.ObjectTypeName, \"simpleName\", mod, \"description\") & \";\""
													}
												}
											],
											"sid": 375380483704702
										},
										{
											"eventType": "variable",
											"name": "modValueRegex",
											"type": "string",
											"initialValue": "\\[.*?\\]",
											"comment": "the regex that will return the first mod value",
											"isStatic": true,
											"isConstant": true,
											"sid": 168471026558236
										},
										{
											"eventType": "variable",
											"name": "modValue",
											"type": "string",
											"initialValue": "",
											"comment": "The text inside the brackets of a given mod",
											"isStatic": true,
											"isConstant": false,
											"sid": 675449617154846
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 114331841409558,
													"parameters": {
														"name": "\"\"",
														"start-index": "1",
														"end-index": "RegexMatchCount(loot.mods, modValueRegex, \"g\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "for each set of square brackets in this loot's mods"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 809453843635835,
													"parameters": {
														"variable": "modValue",
														"value": "RegexReplace(RegexMatchAt(loot.mods, modValueRegex, \"\", 0), \"\\[|]\", \"g\", \"\")"
													}
												}
											],
											"sid": 668230999384246,
											"children": [
												{
													"eventType": "variable",
													"name": "lowerLimit",
													"type": "number",
													"initialValue": "0",
													"comment": "the lowest number that this mod can roll",
													"isStatic": true,
													"isConstant": false,
													"sid": 694917693599524
												},
												{
													"eventType": "variable",
													"name": "upperLimit",
													"type": "number",
													"initialValue": "0",
													"comment": "the highest number that this mod can roll",
													"isStatic": true,
													"isConstant": false,
													"sid": 136852260606726
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 221351255110008,
															"parameters": {
																"first-value": "find(modValue, \"-\")",
																"comparison": 1,
																"second-value": "-1"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if this particular value contains a dash, it's a numeric value"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 461581557850035,
															"parameters": {
																"variable": "lowerLimit",
																"value": "int(tokenat(modValue, 0, \"-\")) * loot.level"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 841670533825303,
															"parameters": {
																"variable": "upperLimit",
																"value": "int(tokenat(modValue, 1, \"-\")) * loot.level"
															}
														},
														{
															"id": "setProbabilityTable",
															"objectClass": "advancedRandom",
															"sid": 264346351548282,
															"parameters": {
																"name": "\"modValues\""
															}
														}
													],
													"sid": 878549987436267,
													"children": [
														{
															"eventType": "comment",
															"text": "Set a numeric mod's value to a random number between the lower and upper limit. Higher numbers are rarer. The rarity of higher numbers diminishingly scales with the loot level."
														},
														{
															"eventType": "comment",
															"text": "TODO: Negative values - should lower numbers be better? or worse?",
															"background-color": [
																0.984313725490196,
																1,
																0,
																1
															]
														},
														{
															"eventType": "variable",
															"name": "total",
															"type": "number",
															"initialValue": "0",
															"comment": "the total weight of all possible mod values, unconverted",
															"isStatic": true,
															"isConstant": false,
															"sid": 275844986849541
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 219774906891118,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-to-eventvar",
																	"objectClass": "System",
																	"sid": 213474108009376,
																	"parameters": {
																		"variable": "total",
																		"value": "Functions.standardizeModValue(lowerLimit, upperLimit, loopindex)"
																	}
																}
															],
															"sid": 231459355083010
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 584623522244621,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"id": "addProbabilityEntry",
																	"objectClass": "advancedRandom",
																	"sid": 526391445067413,
																	"parameters": {
																		"value": "loopindex * (.1 ^ RegexMatchCount(modValue, \"x\", \"g\"))",
																		"weight": "Functions.standardizeModValue(lowerLimit, upperLimit, loopindex) / total"
																	}
																},
																{
																	"type": "comment",
																	"text": "the number of Xs in the mod value is the number of decimal places to shift the result. We have to do it this way because of floating point math problems"
																}
															],
															"sid": 455988557394103
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "loot",
																	"sid": 461098221041892,
																	"parameters": {
																		"instance-variable": "mods",
																		"value": "RegexReplace(Self.mods, modValueRegex, \"\", \"{\" & advancedRandom.Weighted & \"}\")"
																	}
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 161370364305718,
																	"parameters": {
																		"variable": "total",
																		"value": "0"
																	}
																}
															],
															"sid": 424302104263233
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 887803499960340,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "We can remove an entire mod table, so remove the entries the same way we added them"
																},
																{
																	"id": "removeProbabilityEntry",
																	"objectClass": "advancedRandom",
																	"sid": 235462776396470,
																	"parameters": {
																		"value": "loopindex * (.1 ^ RegexMatchCount(modValue, \"x\", \"g\"))",
																		"weight": "0"
																	}
																}
															],
															"sid": 533866735890312
														}
													]
												},
												{
													"eventType": "comment",
													"text": "For text mod values, select a choice at random"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 834396030101558
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it doesn't, it should contain a dollar sign, which means it's a text value"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 835948514084487,
															"parameters": {
																"instance-variable": "mods",
																"value": "RegexReplace(Self.mods, modValueRegex, \"\", \"{\" & tokenat(modValue, floor(random(tokencount(modValue, \"$\"))), \"$\") & \"}\")"
															}
														}
													],
													"sid": 734276999010657
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "standardizeModValue",
							"functionDescription": "Standardize the possible value of a mod to a uniform range",
							"functionCategory": "mods",
							"functionReturnType": "number",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "lowerLimit",
									"type": "number",
									"initialValue": "0",
									"comment": "the lowest number that this mod can roll",
									"sid": 165700446124118
								},
								{
									"name": "upperLimit",
									"type": "number",
									"initialValue": "0",
									"comment": "the highest number that this mod can roll",
									"sid": 140901520535839
								},
								{
									"name": "currentLoopindex",
									"type": "number",
									"initialValue": "0",
									"comment": "the loopindex of the current loop over possible mod values",
									"sid": 762366194120232
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 237729906977959,
									"parameters": {
										"value": "lerp(loot.level, 1, unlerp(lowerLimit, upperLimit, currentLoopindex))"
									}
								}
							],
							"sid": 949225567251958
						}
					],
					"sid": 258106155275995
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "items",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 935398605095828,
									"parameters": {
										"mouse-button": "right",
										"click-type": "clicked",
										"object-clicked": "item"
									}
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 588715691115645,
									"parameters": {
										"layer": "\"characterMenu\""
									}
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 771285086035772,
									"parameters": {
										"layer": "\"inventoryMenu\""
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 560608246182680,
									"parameters": {
										"object": "slot",
										"expression": "slot.identifier",
										"comparison": 0,
										"value": "item.identifier"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if an item is right clicked, and both the inventory and character menus are open, pick the slot the item is in"
								},
								{
									"callFunction": "updateAnimations",
									"sid": 887995735821246,
									"parameters": [
										"\"idle\"",
										"body.OriginalAnimationSpeed",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 437401110381303,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 610832630764773,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "item.type"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the character menu"
										}
									],
									"sid": 550305845027586,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 484307946857076,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 604194622057872,
													"parameters": {
														"object": "slot",
														"expression": "slot.type = \"none\" & slot.identifier = 0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "check to see if there's any empty inventory slots the item can go into"
												}
											],
											"sid": 220568365792590,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 469443065346884,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 352754287175001,
															"parameters": {
																"object": "slot",
																"expression": "slot.identifier",
																"comparison": 0,
																"value": "item.identifier"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if there are, detach the item from its current slot"
														},
														{
															"callFunction": "detachItem",
															"sid": 835207460693215
														},
														{
															"callFunction": "queueGearManagement",
															"sid": 609886070905927
														},
														{
															"callFunction": "manageMods",
															"sid": 136639627650351,
															"parameters": [
																false
															]
														}
													],
													"sid": 152222844229358,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 828249338222470,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-evaluate",
																	"objectClass": "System",
																	"sid": 248233827646714,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.type = \"none\" & slot.identifier = 0"
																	}
																},
																{
																	"id": "pick-nth-instance",
																	"objectClass": "System",
																	"sid": 480399471336736,
																	"parameters": {
																		"object": "slot",
																		"instance": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "then attach it to the first empty inventory slot"
																},
																{
																	"callFunction": "attachItem",
																	"sid": 113775732412119
																}
															],
															"sid": 800622303427423
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 441782255501353
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 341490887870542,
											"parameters": {
												"value": "find(item.classRestrictions, player.class) <> -1 | findCase(item.classRestrictions, \"All Classes\") <> - 1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 610017096337653,
											"parameters": {
												"instance-variable": "level",
												"comparison": 5,
												"value": "item.level"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the inventory menu, and can be equipped"
										}
									],
									"sid": 469557265898529,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 561748002048200,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 821642348770305,
													"parameters": {
														"object": "slot",
														"expression": "slot.type",
														"comparison": 0,
														"value": "item.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "pick the slots that match the item's type"
												}
											],
											"sid": 373573424048934,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 980800715661354,
															"parameters": {
																"object": "slot",
																"expression": "slot.identifier",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "of those slots, check if any are empty"
														}
													],
													"sid": 141790148535618,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 127707970504769,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 916325906161856,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.identifier",
																		"comparison": 0,
																		"value": "item.identifier"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "now that we know there's an empty character slot for this item, go back to the slot holding our item, and detach"
																},
																{
																	"callFunction": "detachItem",
																	"sid": 214449577715308
																}
															],
															"sid": 887468038183702,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 354047122038983,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-evaluate",
																			"objectClass": "System",
																			"sid": 301471495040907,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.type = item.type & slot.identifier = 0"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 318274835792837,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "re-pick the first empty character slot that matches the item's type, and attach to it"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 383335703408057
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 530233516824490
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 759946137376178,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 919076443516843
																}
															]
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 796533398948327
														},
														{
															"id": "pick-nth-instance",
															"objectClass": "System",
															"sid": 577614967156832,
															"parameters": {
																"object": "slot",
																"instance": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if no slots are empty, start the *swap*: pick the first slot and store its identifier, which is also the identifier of the item in it"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 526168207309239,
															"parameters": {
																"variable": "swapID",
																"value": "slot.identifier"
															}
														}
													],
													"sid": 499823969870056,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 263997570996260,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 725741161718299,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.identifier",
																		"comparison": 0,
																		"value": "item.identifier"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "go back to the slot holding our item, and detach. save this slots UID so we know where to put the other item"
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 834702856921462,
																	"parameters": {
																		"variable": "swapSlotUID",
																		"value": "slot.UID"
																	}
																},
																{
																	"type": "comment",
																	"text": "for some reason this isn't a function and I'm too scared to change it to one"
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "slot",
																	"sid": 718669814539874,
																	"parameters": {
																		"instance-variable": "identifier",
																		"value": "0"
																	}
																},
																{
																	"id": "remove-from-parent",
																	"objectClass": "item",
																	"sid": 295226669901879
																}
															],
															"sid": 240232231168794,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 836733709612203,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 330368232721342,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.type",
																				"comparison": 0,
																				"value": "item.type"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 555943012192629,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "re-pick the first character slot that matches the item's type, and attach to it, even though it has an different item in it"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 937442492661944
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 950011551312166
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 274669631608298,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 933613637577582,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 231628781161458,
																					"parameters": {
																						"object": "item"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 193745971658093,
																					"parameters": {
																						"object": "item",
																						"expression": "item.identifier",
																						"comparison": 0,
																						"value": "swapID"
																					}
																				},
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 408955921587844,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 408279037831258,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.UID",
																						"comparison": 0,
																						"value": "swapSlotUID"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "now we have both items in the same slot. we'll detach the item that shouldn't be there, picking it with swapID. We don't need to clear the identifier value because it was already set correctly in the previous event"
																				},
																				{
																					"id": "remove-from-parent",
																					"objectClass": "item",
																					"sid": 507288274410844
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 573056621137338,
																					"parameters": [
																						false
																					]
																				},
																				{
																					"type": "comment",
																					"text": "it'll go where the other item left, which we have saved in previousLocationUID"
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 672428174704793
																				}
																			],
																			"sid": 404133702259918
																		}
																	]
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drag-start",
									"objectClass": "item",
									"sid": 171542721559928,
									"behaviorType": "DragDrop"
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 102305348394096,
									"parameters": {
										"object": "slot",
										"expression": "slot.identifier",
										"comparison": 0,
										"value": "item.identifier"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when an item starts being dragged, record where it came from, set dragging to true, and detach it"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 886968429260276,
									"parameters": {
										"variable": "draggedOriginSlotUID",
										"value": "slot.UID"
									}
								},
								{
									"callFunction": "detachItem",
									"sid": 266807440365284
								},
								{
									"type": "comment",
									"text": "This ensures whatever is being dragged is always on top"
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 988977807503661,
									"parameters": {
										"layer": "\"overlay\""
									}
								}
							],
							"sid": 827535395163321,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 379527898253552,
											"parameters": {
												"instance-variable": "type",
												"comparison": 1,
												"value": "\"none\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it came from a character slot, manage the gear appropriately"
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 927556251758834
										},
										{
											"callFunction": "manageMods",
											"sid": 735611209322461,
											"parameters": [
												false
											]
										}
									],
									"sid": 653685186723326
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drop",
									"objectClass": "item",
									"sid": 940330704376401,
									"behaviorType": "DragDrop"
								}
							],
							"actions": [],
							"sid": 399701785813219,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 695387306087932,
											"parameters": {
												"object": "slot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over a slot"
										}
									],
									"sid": 741566376291973,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 670569213014739,
													"parameters": {
														"value": "slot.type <> item.type & slot.type <> \"none\" "
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 685936448807156,
													"parameters": {
														"value": "findCase(item.classRestrictions, \"All Classes\") = - 1 & find(item.classRestrictions, body.ObjectTypeName) = -1 & slot.type <> \"none\""
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 247968772606905,
													"parameters": {
														"value": "item.level > player.level & slot.type <> \"none\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and the item can't go into that slot, because of one of the following reasons:"
												},
												{
													"type": "comment",
													"text": "that slot's type doesn't match the item's type, and that slot's type is also not \"none\""
												},
												{
													"type": "comment",
													"text": "that item's class doesn't match the player's class, and the item's class is not \"All Classes\", and that slot's type is not \"none\""
												},
												{
													"type": "comment",
													"text": "that item's level is higher than the player's level, and that slot's type is not \"none\""
												},
												{
													"type": "comment",
													"text": "extracting \"slot.type <> \"none\"\" to a parent event doesn't allow the 'else' event to properly fire, if none of these conditions are met",
													"text-color": [
														0,
														0,
														0,
														1
													],
													"background-color": [
														1,
														1,
														0,
														1
													]
												}
											],
											"sid": 354664591457687,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 588064325410315,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 920546490074711,
															"parameters": {
																"object": "slot",
																"expression": "slot.UID",
																"comparison": 0,
																"value": "draggedOriginSlotUID"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "send the item back to the slot it came from"
														},
														{
															"callFunction": "attachItem",
															"sid": 695133067571701
														}
													],
													"sid": 947341262946449,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 645834984413462,
																	"parameters": {
																		"first-value": "slot.type",
																		"comparison": 1,
																		"second-value": "\"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it came from a character slot, manage the gear and mods appropriately"
																},
																{
																	"callFunction": "queueGearManagement",
																	"sid": 335358865412951
																},
																{
																	"callFunction": "manageMods",
																	"sid": 448788296221639,
																	"parameters": [
																		true
																	]
																}
															],
															"sid": 223805058340345
														}
													]
												}
											],
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 608914029557085
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and that slot was a character slot that matches the item's type, or is \"none\""
												}
											],
											"sid": 562006739050960,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 597140209712336,
															"parameters": {
																"first-value": "slot.identifier",
																"comparison": 0,
																"second-value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "and that slot is empty, attach the item to it"
														},
														{
															"callFunction": "attachItem",
															"sid": 596960974351479
														}
													],
													"sid": 870440945063066,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 484854148540705,
																	"parameters": {
																		"first-value": "slot.type",
																		"comparison": 1,
																		"second-value": "\"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it came from a character slot, manage the gear and mods appropriately"
																},
																{
																	"callFunction": "queueGearManagement",
																	"sid": 249194179735476
																},
																{
																	"callFunction": "manageMods",
																	"sid": 102792447386736,
																	"parameters": [
																		true
																	]
																}
															],
															"sid": 194707231346571
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 187631772142266
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "and that slot is not empty, save its identifier (which is also its item's identifier) so we can overwrite it"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 771700832397227,
															"parameters": {
																"variable": "swapID",
																"value": "slot.identifier"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 546789526977430,
															"parameters": {
																"variable": "dragCacheItemUID",
																"value": "item.UID"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 307351783282285,
															"parameters": {
																"variable": "dragCacheSlotUID",
																"value": "slot.UID"
															}
														}
													],
													"sid": 925008931677699,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 553011608764114,
																	"parameters": {
																		"object": "item"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 844624818434821,
																	"parameters": {
																		"object": "item",
																		"expression": "item.identifier",
																		"comparison": 0,
																		"value": "swapID"
																	}
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 293651261702794,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 885275044218798,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.UID",
																		"comparison": 0,
																		"value": "draggedOriginSlotUID"
																	}
																},
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 480143029988135,
																	"parameters": {
																		"value": "slot.type = item.type | slot.type = \"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "check if the item can go back to the origin slot"
																}
															],
															"sid": 464026553237280,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 689549450637590,
																			"parameters": {
																				"object": "item"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 337029179692317,
																			"parameters": {
																				"object": "item",
																				"expression": "item.UID",
																				"comparison": 0,
																				"value": "dragCacheItemUID"
																			}
																		},
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 637546061687633,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 155336612958381,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.UID",
																				"comparison": 0,
																				"value": "dragCacheSlotUID"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it can, re-pick the item being dragged, and the slot we dropped it on, and attach them"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 678899096500546
																		}
																	],
																	"sid": 212308422475292,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "compare-two-values",
																					"objectClass": "System",
																					"sid": 838789578714350,
																					"parameters": {
																						"first-value": "slot.type",
																						"comparison": 1,
																						"second-value": "\"none\""
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "if it came from a character slot, manage the gear and mods appropriately"
																				},
																				{
																					"callFunction": "queueGearManagement",
																					"sid": 421687173483183
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 922397242824812,
																					"parameters": [
																						true
																					]
																				}
																			],
																			"sid": 676092927805364
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 312271844596524,
																					"parameters": {
																						"object": "item"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 553159868067061,
																					"parameters": {
																						"object": "item",
																						"expression": "item.identifier",
																						"comparison": 0,
																						"value": "swapID"
																					}
																				},
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 428620782307139,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 248876190255851,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.UID",
																						"comparison": 0,
																						"value": "draggedOriginSlotUID"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "now pick and detach the overlapped item that shouldn't be there (but the slot's identifier is OK), and pick the origin slot, and attach the two"
																				},
																				{
																					"id": "remove-from-parent",
																					"objectClass": "item",
																					"sid": 992757793937793
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 589077264734930,
																					"parameters": [
																						false
																					]
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 589004778395882
																				}
																			],
																			"sid": 762906856022523,
																			"children": [
																				{
																					"eventType": "block",
																					"conditions": [
																						{
																							"id": "compare-two-values",
																							"objectClass": "System",
																							"sid": 829910294078159,
																							"parameters": {
																								"first-value": "slot.type",
																								"comparison": 1,
																								"second-value": "\"none\""
																							}
																						}
																					],
																					"actions": [
																						{
																							"type": "comment",
																							"text": "if it came from a character slot, manage the gear and mods appropriately"
																						},
																						{
																							"callFunction": "queueGearManagement",
																							"sid": 610304706525411
																						},
																						{
																							"callFunction": "manageMods",
																							"sid": 689374442970799,
																							"parameters": [
																								true
																							]
																						}
																					],
																					"sid": 142763226872703
																				}
																			]
																		}
																	]
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 213136981060223
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 367739148944933,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 356724652666509,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.UID",
																		"comparison": 0,
																		"value": "draggedOriginSlotUID"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it can't, don't swap, and send the item being dragged back to the origin slot"
																},
																{
																	"callFunction": "attachItem",
																	"sid": 208792725258952
																}
															],
															"sid": 328654190933021,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 630410726847750,
																			"parameters": {
																				"first-value": "slot.type",
																				"comparison": 1,
																				"second-value": "\"none\""
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it came from a character slot, manage the gear and mods appropriately"
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 432156743268246
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 313335070956290,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 813365229432282
																}
															]
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [],
											"sid": 320051214841384
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 430044180804925
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 754410337887077,
											"parameters": {
												"object": "invalidLocation"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over an invalid location, send the item back to the slot it came from"
										},
										{
											"callFunction": "returnItem",
											"sid": 830932401995178
										}
									],
									"sid": 173613641132192
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 807845078693595
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 848638687292153,
											"parameters": {
												"object": "prop"
											}
										}
									],
									"actions": [
										{
											"callFunction": "returnItem",
											"sid": 188046764195015
										}
									],
									"sid": 681043468436456
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 351119690702053
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 142829702532871,
											"parameters": {
												"object": "9PatchInvalidLocations"
											}
										}
									],
									"actions": [
										{
											"callFunction": "returnItem",
											"sid": 760097941165216
										}
									],
									"sid": 655650270015638
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 746631595027754
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 219299045904732,
											"parameters": {
												"object": "background"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over the game world background, spawn its loot"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 627793945948014,
											"parameters": {
												"object-name": "item.simpleName & \"_loot\"",
												"layer": "\"background\"",
												"x": "mouse.X",
												"y": "mouse.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 556251734949061,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 719006855336677,
													"parameters": {
														"object": "loot"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "transfer data from item to loot, then destroy the item"
												},
												{
													"id": "set-animation",
													"objectClass": "loot",
													"sid": 500499623414376,
													"parameters": {
														"animation": "\"static_\" & (floor(random(1, 17)) * ARC) - HALF_CIRCLE",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 981668832353211,
													"parameters": {
														"instance-variable": "identifier",
														"value": "item.identifier"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 959227679172870,
													"parameters": {
														"instance-variable": "simpleName",
														"value": "item.simpleName"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 388357061755415,
													"parameters": {
														"instance-variable": "fullName",
														"value": "item.fullName"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 914179442486360,
													"parameters": {
														"instance-variable": "type",
														"value": "item.type"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 902484779634297,
													"parameters": {
														"instance-variable": "lore",
														"value": "item.lore"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 362669929305554,
													"parameters": {
														"instance-variable": "level",
														"value": "item.level"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 571714791507665,
													"parameters": {
														"instance-variable": "mods",
														"value": "item.mods"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 212656048331637,
													"parameters": {
														"instance-variable": "classRestrictions",
														"value": "item.classRestrictions"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 855866223536522,
													"parameters": {
														"instance-variable": "modTable",
														"value": "item.modTable"
													}
												},
												{
													"id": "destroy",
													"objectClass": "item",
													"sid": 197838163977498
												}
											],
											"sid": 496856218332598
										}
									]
								}
							]
						},
						{
							"functionName": "attachItem",
							"functionDescription": "attaches an item to a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "item",
									"sid": 775239099829963,
									"parameters": {
										"x": "slot.X",
										"y": "slot.Y"
									}
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 282712149404009,
									"parameters": {
										"layer": "slot.LayerName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 815964194354236,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 829487362594103,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 437730535233655,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 776138648900020,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 422365193427941,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 554238670862256
								}
							]
						},
						{
							"functionName": "detachItem",
							"functionDescription": "detaches an item from a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 714493473542525,
									"parameters": {
										"instance-variable": "identifier",
										"value": "0"
									}
								},
								{
									"id": "remove-from-parent",
									"objectClass": "item",
									"sid": 226225276438894
								}
							],
							"sid": 881944124391655,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 140983841569789,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 174570673259630,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 417363291653191
								}
							]
						},
						{
							"functionName": "returnItem",
							"functionDescription": "Send an item back to whatever it came from, if it was dropped in an ineligible location.",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 790003971076737,
									"parameters": {
										"object": "slot",
										"expression": "slot.UID",
										"comparison": 0,
										"value": "draggedOriginSlotUID"
									}
								}
							],
							"actions": [
								{
									"callFunction": "attachItem",
									"sid": 257549238666092
								}
							],
							"sid": 669193285438587,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 947465263058252,
											"parameters": {
												"instance-variable": "type",
												"comparison": 1,
												"value": "\"\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it came from a character slot, manage the gear and mods appropriately"
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 860603048097230
										},
										{
											"callFunction": "manageMods",
											"sid": 470642327753329,
											"parameters": [
												true
											]
										}
									],
									"sid": 137910405971042
								}
							]
						}
					],
					"sid": 645635025486599
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "gear",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "queueGearManagement",
							"functionDescription": "Add a request to manage gear to the queue",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 767810941640445,
									"parameters": {
										"value": "slot.type <> \"neck\" | slot.type <> \"ring\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "as long as the slot's type is not neck or ring..."
								},
								{
									"id": "push",
									"objectClass": "gearQueueArray",
									"sid": 749412664334466,
									"parameters": {
										"where": "front",
										"value": "slot.UID",
										"axis": "x"
									}
								}
							],
							"sid": 143517779829659
						},
						{
							"eventType": "variable",
							"name": "blocked",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 695329498320645
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 456274353307555,
									"parameters": {
										"variable": "blocked"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 999175052855849,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-empty",
											"objectClass": "gearQueueArray",
											"sid": 444888010907526,
											"isInverted": true
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "slot",
											"sid": 826222459576580,
											"parameters": {
												"unique-id": "gearQueueArray.Back"
											}
										}
									],
									"actions": [
										{
											"id": "pop",
											"objectClass": "gearQueueArray",
											"sid": 495025889538759,
											"parameters": {
												"where": "back",
												"axis": "x"
											}
										},
										{
											"callFunction": "updateAnimations",
											"sid": 452588573889096,
											"parameters": [
												"\"idle\"",
												"body.OriginalAnimationSpeed",
												"\"playFromBeginning\""
											]
										},
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 755835890060922,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 753309846385322,
											"parameters": {
												"variable": "blocked",
												"value": "true"
											}
										}
									],
									"sid": 868134707259503,
									"children": [
										{
											"eventType": "variable",
											"name": "gearToSpawn",
											"type": "string",
											"initialValue": "",
											"comment": "the name of the gear to spawn",
											"isStatic": true,
											"isConstant": false,
											"sid": 507532226337350
										},
										{
											"eventType": "variable",
											"name": "gearToDestroy",
											"type": "string",
											"initialValue": "",
											"comment": "the name of the gear to destroy",
											"isStatic": true,
											"isConstant": false,
											"sid": 796888351887491
										},
										{
											"eventType": "variable",
											"name": "gearToDestroyUID",
											"type": "number",
											"initialValue": "0",
											"comment": "the UID of the gear to destroy",
											"isStatic": true,
											"isConstant": false,
											"sid": 653142365454175
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 802497492991623,
													"parameters": {
														"object": "item",
														"expression": "item.identifier",
														"comparison": 0,
														"value": "slot.identifier"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if it's not empty, pick the item that's currently in that slot"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 785633943433889,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "body.ObjectTypeName & \"_\" & item.simpleName & \"_gear\""
													}
												}
											],
											"sid": 641425482981819,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 864155460211772,
															"parameters": {
																"object": "gear",
																"expression": "gear.type",
																"comparison": 0,
																"value": "slot.type"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "destroy the existing gear that correlates with the slot's type, if it exists"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 270133762466694,
															"parameters": {
																"variable": "gearToDestroy",
																"value": "gear.ObjectTypeName"
															}
														}
													],
													"sid": 854297470528183
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 413498936600433
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 635448070838991,
													"parameters": {
														"object": "gear",
														"expression": "gear.type",
														"comparison": 0,
														"value": "slot.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if it's empty, pick the gear that correlates with the slot's type"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 294524074614853,
													"parameters": {
														"variable": "gearToDestroy",
														"value": "gear.ObjectTypeName"
													}
												}
											],
											"sid": 932158191432713,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 209381221455966,
															"parameters": {
																"value": "slot.type = \"chest\" & player.class <> \"man\""
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 114006959877210,
															"parameters": {
																"instance-variable": "type",
																"comparison": 0,
																"value": "\"legs\""
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 292918180453755,
															"parameters": {
																"instance-variable": "type",
																"comparison": 0,
																"value": "\"head\""
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it's legs or head, or chest and not a man, (the slots with visual representation that have default gear), load the default gear"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 621298938763509,
															"parameters": {
																"variable": "gearToSpawn",
																"value": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
															}
														}
													],
													"sid": 482972403415376,
													"isOrBlock": true
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 834074795987185
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if there's no gear, that means the game has just started, and we just need to spawn default gear"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 459732092901564,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
													}
												}
											],
											"sid": 127748103716226
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 229922055588224,
													"parameters": {
														"variable": "gearToSpawn",
														"comparison": 1,
														"value": "\"\""
													}
												}
											],
											"actions": [
												{
													"id": "load-object-images-by-name",
													"objectClass": "System",
													"sid": 141994234606501,
													"parameters": {
														"object": "gearToSpawn"
													}
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 306533516831540
												},
												{
													"id": "create-object-by-name",
													"objectClass": "System",
													"sid": 159036866421100,
													"parameters": {
														"object-name": "gearToSpawn",
														"layer": "\"main\"",
														"x": "player.X",
														"y": "player.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 823666391121210,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "\"\""
													}
												}
											],
											"sid": 731974333425003,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 713404709268296,
															"parameters": {
																"object": "gear"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "unblock in this subevent, where we can guarantee the gear exists"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "gear",
															"sid": 101642919569253,
															"parameters": {
																"instance-variable": "type",
																"value": "slot.type"
															}
														},
														{
															"id": "add-child",
															"objectClass": "body",
															"sid": 474768909675716,
															"parameters": {
																"child": "gear",
																"transform-x": true,
																"transform-y": true,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-o": false,
																"transform-z-elevation": false,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														}
													],
													"sid": 806281012459289
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 801785853100774,
															"parameters": {
																"object": "gear",
																"expression": "gearToDestroy",
																"comparison": 0,
																"value": "gear.ObjectTypeName"
															}
														}
													],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "gear",
															"sid": 435627271916718
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 634449951731529,
															"parameters": {
																"variable": "gearToDestroy",
																"value": "\"\""
															}
														}
													],
													"sid": 731691639457784
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"type": "comment",
															"text": "if we're only creating gear and not destroying any, the previous event won't run, so this needs to be separate"
														},
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 639617080021623,
															"parameters": {
																"variable": "blocked",
																"value": "false"
															}
														}
													],
													"sid": 294159635762109
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 583501936080612
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 953512478490965,
													"parameters": {
														"object": "gear",
														"expression": "gearToDestroy",
														"comparison": 0,
														"value": "gear.ObjectTypeName"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if we're destroying gear without creating gear, we can instantly destroy it without waiting"
												},
												{
													"id": "destroy",
													"objectClass": "gear",
													"sid": 607711161998475
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 188726040899818,
													"parameters": {
														"variable": "gearToDestroy",
														"value": "\"\""
													}
												},
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 557632153383694,
													"parameters": {
														"variable": "blocked",
														"value": "false"
													}
												}
											],
											"sid": 224880611156571
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 579877351665732
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 882868098116194
										}
									],
									"actions": [
										{
											"id": "unload-unused-images",
											"objectClass": "System",
											"sid": 192725039673478
										}
									],
									"sid": 950005626813540
								}
							]
						}
					],
					"sid": 976456797084060
				}
			],
			"sid": 156017693834822
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "isometry",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "sortable",
							"sid": 365385957978388
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "This event needs to be above the sorting group to prevent a graphical glitch. This uses Image Point 1 if it exists, otherwise it defaults to Image Point 0."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "sortable",
							"sid": 206267541351144,
							"parameters": {
								"instance-variable": "yValue",
								"value": "Self.ImagePointY(1)"
							}
						},
						{
							"id": "sort-z-order",
							"objectClass": "System",
							"sid": 480855599480174,
							"parameters": {
								"object": "sortable",
								"instance-variable": {
									"name": "yValue",
									"objectClass": "sortable"
								}
							}
						}
					],
					"sid": 868041002995505
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-layer",
							"objectClass": "loot",
							"sid": 209328512396284,
							"parameters": {
								"layer": "\"main\""
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "loot",
							"sid": 830738639695161,
							"parameters": {
								"parent": "prop",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "This event must be below the above event, or else the loot will flash when the z order of its parent prop changes."
						},
						{
							"type": "comment",
							"text": "If a piece of loot is on the 'main' layer, it's part of the environment, and needs to be moved in front of whatever it's 'on', i.e., the prop that is its parent."
						},
						{
							"id": "move-to-object",
							"objectClass": "loot",
							"sid": 220340964144110,
							"parameters": {
								"where": "in-front",
								"object": "prop"
							}
						}
					],
					"sid": 489056358912797
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "sorting",
					"description": "Check for edge cases to indicate utilization of a custom sorting order, otherwise use the default.",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "man_simpleSword_gear",
									"sid": 755476965331208,
									"parameters": {
										"animation": "\"idle_157.5\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 702532448346007,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 390173758568011,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 883275433593183,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 564538742535919,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 788751064850888,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 942548275877263,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 445366415603596,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 348299811569005
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 503835850935764
								},
								{
									"id": "is-between-values",
									"objectClass": "System",
									"sid": 611856887479244,
									"parameters": {
										"value": "player.degrees",
										"lower-bound": "-67.5",
										"upper-bound": "22.5"
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 901435269026737,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 172207901148276,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 290903160034197,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 186295098346742,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 979459098737440,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 287088795551390,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 701638109081111,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 701987836742656
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 875563291302660
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "The normal sorting order."
								},
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 938400889925313,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 988530964135385,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 651222762711156,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 547581038454800,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 882564343136704,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 597937028052401,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 167383299477802,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 603941084953152
						}
					],
					"sid": 621826706568727
				}
			],
			"sid": 937100591006447
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "levels",
					"description": "handle the player leveling up",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 706533316977819,
									"parameters": {
										"instance-variable": "experience",
										"comparison": 5,
										"value": "Self.level * 100"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 689062967222336,
									"parameters": {
										"instance-variable": "experience",
										"value": "0"
									}
								},
								{
									"id": "add-to-instvar",
									"objectClass": "player",
									"sid": 956489463791798,
									"parameters": {
										"instance-variable": "level",
										"value": "1"
									}
								}
							],
							"sid": 634680856601273
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 270549184786353,
									"parameters": {
										"instance-variable": "level",
										"comparison": 0,
										"value": "1"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 956052953727412,
									"parameters": {
										"object": "ability",
										"expression": "ability.IID",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 947040368790103
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "ability",
									"sid": 342675382481448,
									"disabled": true,
									"parameters": {
										"animation": "abilitiesArray.At(Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"simpleName\"), 1)",
										"from": "beginning"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "ability",
									"sid": 669052896827154,
									"parameters": {
										"animation": "\"heroicStrike\"",
										"from": "beginning"
									}
								}
							],
							"sid": 940419245050055
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 548566264395182,
									"parameters": {
										"instance-variable": "level",
										"comparison": 0,
										"value": "2"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 789016716037769,
									"parameters": {
										"object": "ability",
										"expression": "ability.IID",
										"comparison": 0,
										"value": "1"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 119316877320385
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "ability",
									"sid": 532294579077369,
									"parameters": {
										"animation": "\"kick\"",
										"from": "beginning"
									}
								}
							],
							"sid": 496529489392555
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 598343253120332,
									"parameters": {
										"instance-variable": "level",
										"comparison": 0,
										"value": "3"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 731532834625423
								}
							],
							"actions": [],
							"sid": 682547630660347
						}
					],
					"sid": 560853960019214
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "camera",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 603442732683550
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "The \"scroll to\" behavior, but still clamp to the right edge even though the layout continues, while not in a building. We don't have to do this for the Y because the top and bottom of the layout is also the play area edges."
								},
								{
									"id": "scroll-to-y",
									"objectClass": "System",
									"sid": 904683201078206,
									"parameters": {
										"y": "player.Y"
									}
								}
							],
							"sid": 192342804958732,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "player",
											"sid": 634967681675669,
											"parameters": {
												"instance-variable": "isInsideBuilding"
											}
										}
									],
									"actions": [
										{
											"id": "scroll-to-x",
											"objectClass": "System",
											"sid": 256341436493275,
											"parameters": {
												"x": "player.X"
											}
										}
									],
									"sid": 135011534147636
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 269752303030072
										}
									],
									"actions": [
										{
											"id": "scroll-to-x",
											"objectClass": "System",
											"sid": 504408172854353,
											"parameters": {
												"x": "min(player.X, LayoutHeight - ViewportWidth(\"main\") / 2)"
											}
										}
									],
									"sid": 260024738787840
								}
							]
						}
					],
					"sid": 437386535914416
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "generation",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 908302383908767,
									"parameters": {
										"tag": "\"startLoading\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: the player to be created is determined on the character selection screen",
									"background-color": [
										1,
										1,
										0,
										1
									]
								},
								{
									"id": "set-moving-angle",
									"objectClass": "player",
									"sid": 195525601946456,
									"behaviorType": "MoveTo",
									"parameters": {
										"angle": "QUARTER_CIRCLE"
									}
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 824010743775710,
									"parameters": {
										"object-name": "player.class",
										"layer": "\"main\"",
										"x": "player.X",
										"y": "player.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 247596661271128
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "body",
									"sid": 821906498427267
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "somehow the default 'head' is spawning before the body's name can be referenced. this 'wait 0' fixes that."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 232463430017992,
									"parameters": {
										"seconds": "0"
									}
								},
								{
									"id": "add-child",
									"objectClass": "player",
									"sid": 802130441263325,
									"parameters": {
										"child": "body",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								},
								{
									"callFunction": "updateAnimations",
									"sid": 216378451846316,
									"parameters": [
										"\"idle\"",
										"body.OriginalAnimationSpeed",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 147297134178316,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 194080292251659,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"head\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "these events to spawn default gear need to be nested, and I don't know why"
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 104426710382001
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 136218559561968
										}
									],
									"sid": 315854207588580,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 765496292019045,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 410256131255504,
													"parameters": {
														"object": "slot",
														"expression": "slot.type",
														"comparison": 0,
														"value": "\"legs\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "queueGearManagement",
													"sid": 708988139671752
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 118214878188060
												}
											],
											"sid": 944221062483027,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "player",
															"sid": 758576516222070,
															"parameters": {
																"instance-variable": "class",
																"comparison": 1,
																"value": "\"man\""
															}
														},
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 364662952518424,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 488970853562646,
															"parameters": {
																"object": "slot",
																"expression": "slot.type",
																"comparison": 0,
																"value": "\"chest\""
															}
														}
													],
													"actions": [
														{
															"callFunction": "queueGearManagement",
															"sid": 741855895061145
														},
														{
															"id": "wait-for-previous-actions",
															"objectClass": "System",
															"sid": 357268931968551
														}
													],
													"sid": 298826179305528
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 832071860216420,
									"parameters": {
										"first-value": "body.Count",
										"comparison": 0,
										"second-value": "1"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 479404276210554,
									"parameters": {
										"value": "gear.Count = 2 | (gear.Count = 3 & player.class <> \"man\")"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 626069295956755
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if there's 1 body and 3 gears, the character has finished loading"
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 722718954816036,
									"parameters": {
										"variable": "characterLoaded",
										"value": "true"
									}
								}
							],
							"sid": 820528211110689
						}
					],
					"sid": 273395503606669
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "facings",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 226847805408058,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "updateFacing",
									"sid": 457704822269483,
									"parameters": [
										"-1",
										"-1"
									]
								}
							],
							"sid": 774150289546542
						},
						{
							"functionName": "updateFacing",
							"functionDescription": "Update the facing of the player.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 941295715930551
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 915092038699125
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 942919002777203,
									"parameters": {
										"first-value": "timescale",
										"comparison": 1,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "this is a function so it can be called in the middle of an ability function"
								}
							],
							"sid": 564814853184454,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 218107748119510,
											"parameters": {
												"variable": "x",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 400230555700600,
											"parameters": {
												"variable": "y",
												"comparison": 1,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-moving-angle",
											"objectClass": "player",
											"sid": 379297991393983,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, x, y)"
											}
										}
									],
									"sid": 601663005552594
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 838503794389132,
											"parameters": {
												"instance-variable": "degrees",
												"value": "round(player.MoveTo.MovingAngle / ARC) * ARC"
											}
										}
									],
									"sid": 472815315459873
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 839912950654796,
											"parameters": {
												"instance-variable": "degrees",
												"comparison": 0,
												"value": "-180"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "both -180 and 180 are possible outcomes, so compensate for the one that doesn't have an animation"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 474728216387351,
											"parameters": {
												"instance-variable": "degrees",
												"value": "HALF_CIRCLE"
											}
										}
									],
									"sid": 481218350912265
								}
							]
						}
					],
					"sid": 528071924570554
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "health and mana",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 413143904177773
								}
							],
							"actions": [
								{
									"id": "set-height",
									"objectClass": "healthOrb",
									"sid": 378778446921463,
									"parameters": {
										"height": "clamp(player.currentHealth / player.maxHealth * self.ImageHeight, 0, Self.ImageHeight)"
									}
								},
								{
									"id": "set-height",
									"objectClass": "manaOrb",
									"sid": 356871380388085,
									"parameters": {
										"height": "clamp(player.currentMana / player.maxMana * Self.ImageHeight, 0, Self.ImageHeight)"
									}
								}
							],
							"sid": 154905051816206
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 930777219360607,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "player.maxHealth"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 948005510207791,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "Self.maxHealth"
									}
								}
							],
							"sid": 626822929654135
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 347193666593438,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 2,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 568140490164365,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "0"
									}
								}
							],
							"sid": 284450252978099
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 927297459158316,
									"parameters": {
										"instance-variable": "currentMana",
										"comparison": 4,
										"value": "player.maxMana"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 206021598300202,
									"parameters": {
										"instance-variable": "currentMana",
										"value": "Self.maxMana"
									}
								}
							],
							"sid": 596737171205302
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 414329790171110,
									"parameters": {
										"instance-variable": "currentMana",
										"comparison": 2,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 883040235264336,
									"parameters": {
										"instance-variable": "currentMana",
										"value": "0"
									}
								}
							],
							"sid": 793873407046539
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 918004471777489,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 945005244314587,
									"parameters": {
										"interval-seconds": "1.0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Regenerate health and mana while not at the maximum values."
								}
							],
							"sid": 668684290774718,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 854256445918559,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 2,
												"value": "Self.maxHealth"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 362708406627703,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 1,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Regenerate health only when alive."
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 230359381703937,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "Self.healthRegen"
											}
										}
									],
									"sid": 675573875826434
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 463626831502173,
											"parameters": {
												"instance-variable": "currentMana",
												"comparison": 2,
												"value": "Self.maxMana"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 678430866172172,
											"parameters": {
												"instance-variable": "currentMana",
												"value": "Self.ManaRegen"
											}
										}
									],
									"sid": 510763216032454
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 166621457417563,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 3,
										"value": "0"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 562594633971818
								}
							],
							"actions": [
								{
									"callFunction": "updateAnimations",
									"sid": 789142860526151,
									"parameters": [
										"\"die\"",
										"body.OriginalAnimationSpeed",
										"\"playFromBeginning\""
									]
								},
								{
									"id": "stop",
									"objectClass": "player",
									"sid": 265532492838695,
									"behaviorType": "MoveTo"
								}
							],
							"sid": 274794580633845
						}
					],
					"sid": 382578483115015
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "movement and interaction",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 125995727596137,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "isometrically correct movement"
								},
								{
									"id": "set-max-speed",
									"objectClass": "player",
									"sid": 256885482061283,
									"behaviorType": "MoveTo",
									"parameters": {
										"max-speed": "Functions.isometrify(Self.movementSpeed, Self.MoveTo.MovingAngle)"
									}
								}
							],
							"sid": 245583672645296,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "player",
											"sid": 173878403506337,
											"parameters": {
												"object": "prop"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 876779841081134,
											"behaviorType": "MoveTo"
										},
										{
											"id": "push-out-solid",
											"objectClass": "player",
											"sid": 751606118494834,
											"behaviorType": "Custom",
											"parameters": {
												"direction": "nearest"
											}
										}
									],
									"sid": 762040588479492
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 120982026255155,
											"parameters": {
												"variable": "isOnInteractCooldown"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 585721311405905
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 944013668078549,
											"parameters": {
												"seconds": "INTERACT_COOLDOWN"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 625124061650027,
											"parameters": {
												"variable": "isOnInteractCooldown",
												"value": "false"
											}
										}
									],
									"sid": 406589245541801
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 978143679708726,
											"parameters": {
												"variable": "isOnInteractCooldown"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "the redundancy here can probably only be solved with inheritance, which Construct currently doesn't have"
										}
									],
									"sid": 903969286228194,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 540000685936331,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "npcBody"
													}
												},
												{
													"id": "pick-parent",
													"objectClass": "npcBody",
													"sid": 699745615466680,
													"parameters": {
														"parent": "npc",
														"which": "own"
													}
												}
											],
											"actions": [],
											"sid": 835848342248823,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "npc",
															"sid": 612869452817336,
															"parameters": {
																"instance-variable": "interactRange",
																"comparison": 5,
																"value": "distance(self.X, Self.Y, player.X, player.Y)"
															}
														}
													],
													"actions": [
														{
															"id": "stop",
															"objectClass": "player",
															"sid": 491104182229753,
															"behaviorType": "MoveTo"
														},
														{
															"callFunction": "updateAnimations",
															"sid": 907249120845704,
															"parameters": [
																"\"idle\"",
																"body.OriginalAnimationSpeed",
																"\"playFromBeginning\""
															]
														},
														{
															"callFunction": "beginDialog",
															"sid": 309503324718462
														}
													],
													"sid": 641734535023417
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 643998034517070
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 229953425033817,
															"parameters": {
																"variable": "uidOfClicked",
																"value": "npc.UID"
															}
														},
														{
															"id": "move-to-position",
															"objectClass": "player",
															"sid": 162515465204135,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "Functions.FixedDistanceAlongLineX(Self.X, Self.Y, npc.X, npc.Y, npc.interactRange)",
																"y": "Functions.FixedDistanceAlongLineY(Self.X, Self.Y, npc.X, npc.Y, npc.interactRange)",
																"mode": "direct"
															}
														}
													],
													"sid": 427665327590872
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 647496400174350,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "enemyBody"
													}
												},
												{
													"id": "pick-topbottom",
													"objectClass": "enemyBody",
													"sid": 558149924020247,
													"parameters": {
														"which": "top"
													}
												},
												{
													"id": "pick-parent",
													"objectClass": "enemyBody",
													"sid": 308256509815841,
													"parameters": {
														"parent": "enemy",
														"which": "own"
													}
												}
											],
											"actions": [],
											"sid": 749602820773931,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "player",
															"sid": 236447170818385,
															"parameters": {
																"instance-variable": "attackRange",
																"comparison": 5,
																"value": "distance(enemy.X, enemy.Y, self.X, Self.Y)"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "When an enemy is left clicked, check to see if it's within attack range. If it isn't, move so that it is. If it is, check to make sure the player isn't in a non-combat area, then attack."
														}
													],
													"sid": 139957733526720,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-overlapping-another-object",
																	"objectClass": "player",
																	"sid": 133381062536125,
																	"parameters": {
																		"object": "nonCombatArea"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "call-mapped-function",
																	"objectClass": "Functions",
																	"sid": 639934518489744,
																	"parameters": {
																		"name": "\"playerAbilities\"",
																		"string": "\"basicAttack\"",
																		"forward-params": "0"
																	}
																}
															],
															"sid": 912467143497990
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 493086878079024
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 215993732116641,
															"parameters": {
																"variable": "uidOfClicked",
																"value": "enemy.UID"
															}
														},
														{
															"id": "move-to-position",
															"objectClass": "player",
															"sid": 769357481209818,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "Functions.FixedDistanceAlongLineX(Self.X, Self.Y, enemy.X, enemy.Y, Self.attackRange)",
																"y": "Functions.FixedDistanceAlongLineY(Self.X, Self.Y, enemy.X, enemy.Y, Self.attackRange)",
																"mode": "direct"
															}
														}
													],
													"sid": 325974417658702
												}
											]
										},
										{
											"eventType": "variable",
											"name": "effectivePickupRange",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 964963236057063
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 926855902879310,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "loot"
													}
												},
												{
													"id": "pick-topbottom",
													"objectClass": "loot",
													"sid": 232999226144291,
													"parameters": {
														"which": "top"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Boost the pick up range by the approximate size of the item, and it's apparent vertical height"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 714405587024301,
													"parameters": {
														"variable": "effectivePickupRange",
														"value": "player.pickupRange + loot.verticalHeight + (loot.Width + loot.Height / 2)"
													}
												}
											],
											"sid": 169232376872581,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 683944934432946,
															"parameters": {
																"first-value": "effectivePickupRange",
																"comparison": 5,
																"second-value": "distance(player.X, player.Y, loot.X, loot.Y)"
															}
														}
													],
													"actions": [
														{
															"id": "stop",
															"objectClass": "player",
															"sid": 826362810870089,
															"behaviorType": "MoveTo"
														},
														{
															"callFunction": "updateAnimations",
															"sid": 852737969328709,
															"parameters": [
																"\"idle\"",
																"body.OriginalAnimationSpeed",
																"\"playFromBeginning\""
															]
														},
														{
															"callFunction": "pickUpLoot",
															"sid": 179972406738069
														}
													],
													"sid": 126826838589515
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 342898607643646
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 922930535780417,
															"parameters": {
																"variable": "uidOfClicked",
																"value": "loot.UID"
															}
														},
														{
															"id": "move-to-position",
															"objectClass": "player",
															"sid": 123314597747222,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "Functions.FixedDistanceAlongLineX(Self.X, Self.Y, loot.X, loot.Y, effectivePickupRange)",
																"y": "Functions.FixedDistanceAlongLineY(Self.X, Self.Y, loot.X, loot.Y, effectivePickupRange)",
																"mode": "direct"
															}
														}
													],
													"sid": 973265333338329
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 300550654264348,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "door"
													}
												}
											],
											"actions": [],
											"sid": 479773362673259,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "door",
															"sid": 987267690455311,
															"parameters": {
																"instance-variable": "interactRange",
																"comparison": 5,
																"value": "distance(door.ImagePointX(1), door.ImagePointY(1), player.X, player.Y)"
															}
														}
													],
													"actions": [
														{
															"callFunction": "buildingTransition",
															"sid": 744348318848902
														}
													],
													"sid": 436095560436944
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 871386455787587
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 275020723577871,
															"parameters": {
																"variable": "uidOfClicked",
																"value": "door.UID"
															}
														},
														{
															"id": "move-to-position",
															"objectClass": "player",
															"sid": 393585758725355,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "Functions.FixedDistanceAlongLineX(Self.X, Self.Y, door.ImagePointX(1), door.ImagePointY(1), door.interactRange)",
																"y": "Functions.FixedDistanceAlongLineY(Self.X, Self.Y, door.ImagePointX(1), door.ImagePointY(1), door.interactRange)",
																"mode": "direct"
															}
														}
													],
													"sid": 597494309837339
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 326863248303330,
													"parameters": {
														"object": "player"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 492410665695329,
													"parameters": {
														"object": "item"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 666570401246243,
													"parameters": {
														"object": "invalidLocation"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 573594975992952,
													"parameters": {
														"object": "9PatchInvalidLocations"
													},
													"isInverted": true
												},
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 775847804277291,
													"parameters": {
														"layer": "\"escapeMenu\""
													},
													"isInverted": true
												},
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 388126389480175,
													"parameters": {
														"layer": "\"mainMenu\""
													},
													"isInverted": true
												}
											],
											"actions": [],
											"sid": 166715960982564,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "mouse-button-is-down",
															"objectClass": "mouse",
															"sid": 954094202655467,
															"parameters": {
																"mouse-button": "right"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the mouse isn't over any of the specified, reset uidOfClicked and walk there normally"
														},
														{
															"callFunction": "normalMovement",
															"sid": 905268901293177
														}
													],
													"sid": 734198820085048
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "mouse-button-is-down",
															"objectClass": "mouse",
															"sid": 128892431348860,
															"parameters": {
																"mouse-button": "left"
															}
														},
														{
															"id": "cursor-is-over-object",
															"objectClass": "mouse",
															"sid": 771157223441082,
															"parameters": {
																"object": "npcBody"
															},
															"isInverted": true
														},
														{
															"id": "cursor-is-over-object",
															"objectClass": "mouse",
															"sid": 354486739837909,
															"parameters": {
																"object": "enemyBody"
															},
															"isInverted": true
														},
														{
															"id": "cursor-is-over-object",
															"objectClass": "mouse",
															"sid": 229704619217903,
															"parameters": {
																"object": "loot"
															},
															"isInverted": true
														},
														{
															"id": "cursor-is-over-object",
															"objectClass": "mouse",
															"sid": 586698452226205,
															"parameters": {
																"object": "door"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"callFunction": "normalMovement",
															"sid": 657244399168125
														}
													],
													"sid": 867796252491452
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 735511063130572,
											"parameters": {
												"variable": "uidOfClicked",
												"comparison": 1,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "we don't need to check that it's 0 for this to function, however it saves us from evaluating each sub-event's condition"
										}
									],
									"sid": 876565196589800,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 720539290630348,
													"parameters": {
														"object": "enemy",
														"expression": "uidOfClicked",
														"comparison": 0,
														"value": "enemy.UID"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 771584707701155,
													"parameters": {
														"instance-variable": "attackRange",
														"comparison": 5,
														"value": "distance(enemy.X, enemy.Y, self.X, Self.Y)"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "As soon as the enemy comes in range, stop moving and attack it."
												},
												{
													"id": "stop",
													"objectClass": "player",
													"sid": 423776126456889,
													"behaviorType": "MoveTo"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 220009919808246,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "0"
													}
												}
											],
											"sid": 766000468871992,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-overlapping-another-object",
															"objectClass": "player",
															"sid": 419261775519050,
															"parameters": {
																"object": "nonCombatArea"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "call-mapped-function",
															"objectClass": "Functions",
															"sid": 492517561741127,
															"parameters": {
																"name": "\"playerAbilities\"",
																"string": "\"basicAttack\"",
																"forward-params": "0"
															}
														}
													],
													"sid": 159625125611369
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-arrived",
													"objectClass": "player",
													"sid": 572346275376375,
													"behaviorType": "MoveTo"
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "when we arrive somewhere, if we had a UID saved of something, call a function based off of what it is"
												}
											],
											"sid": 768185830917990,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 188152185536450,
															"parameters": {
																"object": "npc",
																"expression": "npc.UID",
																"comparison": 0,
																"value": "uidOfClicked"
															}
														},
														{
															"id": "pick-children",
															"objectClass": "npc",
															"sid": 903886249655530,
															"parameters": {
																"child": "npcBody",
																"which": "own"
															}
														}
													],
													"actions": [
														{
															"callFunction": "beginDialog",
															"sid": 888426382144437
														}
													],
													"sid": 904089008495540
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 810777610648875,
															"parameters": {
																"object": "loot",
																"expression": "loot.UID",
																"comparison": 0,
																"value": "uidOfClicked"
															}
														}
													],
													"actions": [
														{
															"callFunction": "pickUpLoot",
															"sid": 807707765453852
														}
													],
													"sid": 969149847173058
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 591541814013020,
															"parameters": {
																"object": "door",
																"expression": "uidOfClicked",
																"comparison": 0,
																"value": "door.UID"
															}
														}
													],
													"actions": [
														{
															"callFunction": "buildingTransition",
															"sid": 837203022624942
														}
													],
													"sid": 529136020412549
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "stop",
															"objectClass": "player",
															"sid": 691611889417839,
															"behaviorType": "MoveTo"
														}
													],
													"sid": 816624984872775
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "The below 2 events have to be here. Do not move them elsewhere. If you do, gear will desynchronize and abilities will break.",
							"text-color": [
								1,
								1,
								1,
								1
							],
							"background-color": [
								0.6078431372549019,
								0,
								0,
								1
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-moving",
									"objectClass": "player",
									"sid": 257293166185651,
									"behaviorType": "MoveTo"
								},
								{
									"id": "compare-x",
									"objectClass": "player",
									"sid": 620319082947073,
									"parameters": {
										"comparison": 1,
										"x-co-ordinate": "Self.lastX"
									}
								},
								{
									"id": "compare-y",
									"objectClass": "player",
									"sid": 822297045595581,
									"parameters": {
										"comparison": 1,
										"y-co-ordinate": "Self.lastY"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "...if they're moving (and not where they were last tick), set their animation appropriately"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 752318121370594,
									"parameters": {
										"instance-variable": "lastX",
										"value": "Self.X"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 958338878941089,
									"parameters": {
										"instance-variable": "lastY",
										"value": "Self.Y"
									}
								}
							],
							"sid": 146079688686831,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 352311202166792,
											"parameters": {
												"value": "find(body.AnimationName, \"idle\") <> -1\n"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if they were idling, start the animation from the beginning"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 813757426231788,
											"parameters": [
												"\"walk\"",
												"player.movementSpeed / ANIMATION_DIVISOR",
												"\"playFromBeginning\""
											]
										}
									],
									"sid": 948214990872049
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 891393396713570
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 716678570682387,
											"parameters": {
												"value": "find(body.AnimationName, \"walk\") <> -1\n"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if they were already walking, play the animation from the current frame"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 713576676136872,
											"parameters": [
												"\"walk\"",
												"player.movementSpeed / ANIMATION_DIVISOR",
												"\"playFromCurrentFrame\""
											]
										}
									],
									"sid": 405952666635705
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-arrived",
									"objectClass": "player",
									"sid": 890033528637521,
									"behaviorType": "MoveTo"
								},
								{
									"id": "on-hit-solid",
									"objectClass": "player",
									"sid": 905301131920126,
									"behaviorType": "MoveTo"
								}
							],
							"actions": [
								{
									"callFunction": "updateAnimations",
									"sid": 457139795317091,
									"parameters": [
										"\"idle\"",
										"body.OriginalAnimationSpeed",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 527150234376711,
							"isOrBlock": true
						},
						{
							"functionName": "normalMovement",
							"functionDescription": "Move to a location and reset the uidOfClicked variable.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "move-to-position",
									"objectClass": "player",
									"sid": 285667238478145,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "mouse.X",
										"y": "mouse.Y",
										"mode": "direct"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 654479744680636,
									"parameters": {
										"variable": "uidOfClicked",
										"value": "0"
									}
								}
							],
							"sid": 736875311258128
						}
					],
					"sid": 914713205483917
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "abilities",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 319890286111428,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "player",
									"sid": 751185817127087,
									"parameters": {
										"object": "nonCombatArea"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 736239834560724,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 596432560112866,
											"parameters": {
												"key": 81
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 534634455222636,
											"parameters": {
												"object": "ability",
												"expression": "ability.IID",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 188353794003162,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "ability.AnimationName",
												"forward-params": "0"
											}
										}
									],
									"sid": 792810018655248
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 399100830826277,
											"parameters": {
												"key": 87
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 893202657118275,
											"parameters": {
												"object": "ability",
												"expression": "ability.IID",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 260465786727523,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "ability.AnimationName",
												"forward-params": "0"
											}
										}
									],
									"sid": 949187034190135
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 424570406192381,
											"parameters": {
												"key": 69
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 987228128396527,
											"parameters": {
												"object": "ability",
												"expression": "ability.IID",
												"comparison": 0,
												"value": "2"
											}
										}
									],
									"actions": [
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 298870390797299,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "ability.AnimationName",
												"forward-params": "0"
											}
										}
									],
									"sid": 179482036150432
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 789118543897601,
											"parameters": {
												"key": 82
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 358716227755775,
											"parameters": {
												"object": "ability",
												"expression": "ability.IID",
												"comparison": 0,
												"value": "3"
											}
										}
									],
									"actions": [
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 924759053638185,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "ability.AnimationName",
												"forward-params": "0"
											}
										}
									],
									"sid": 258916997745556
								}
							]
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Man abilities",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"functionName": "basicAttack",
									"functionDescription": "",
									"functionCategory": "abilities",
									"functionReturnType": "none",
									"functionCopyPicked": true,
									"functionIsAsync": false,
									"functionParameters": [
										{
											"name": "x",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"sid": 935557963406068
										},
										{
											"name": "y",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"sid": 813009262949045
										}
									],
									"eventType": "function-block",
									"conditions": [],
									"actions": [],
									"sid": 158426868239317,
									"children": [
										{
											"eventType": "variable",
											"name": "PROJECTILE_SPEED",
											"type": "number",
											"initialValue": "650",
											"comment": "The speed of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 156558711699493
										},
										{
											"eventType": "variable",
											"name": "MANIFESTATION_FRAME",
											"type": "number",
											"initialValue": "9",
											"comment": "The (0-based) frame in which the projectile should manifest",
											"isStatic": false,
											"isConstant": true,
											"sid": 121473222003241
										},
										{
											"eventType": "variable",
											"name": "SIZE",
											"type": "number",
											"initialValue": "99",
											"comment": "The size of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 790544221819240
										},
										{
											"eventType": "variable",
											"name": "RANGE",
											"type": "number",
											"initialValue": "150",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 793422426728493
										},
										{
											"eventType": "variable",
											"name": "waitPeriod",
											"type": "number",
											"initialValue": "0",
											"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
											"isStatic": true,
											"isConstant": false,
											"sid": 811409691689556
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 278688677374685,
													"parameters": {
														"object": "gear",
														"expression": "gear.type",
														"comparison": 0,
														"value": "\"mainHand\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "must have a weapon equipped"
												},
												{
													"id": "stop",
													"objectClass": "player",
													"sid": 421576152101335,
													"behaviorType": "MoveTo"
												},
												{
													"callFunction": "updateFacing",
													"sid": 993737162214670,
													"parameters": [
														"enemy.X",
														"enemy.Y"
													]
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 958732250103579,
													"parameters": {
														"group-name": "\"movement and interaction\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 641368460762310,
													"parameters": {
														"group-name": "\"abilities\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 379811782309110,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 522019572370559,
													"parameters": {
														"animation": "\"downwardSlash_\" & player.degrees",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-speed",
													"objectClass": "body",
													"sid": 105262697902128,
													"parameters": {
														"speed": "player.actionSpeed"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 510844565494314,
													"parameters": {
														"variable": "waitPeriod",
														"value": "TICKS_PER_SECOND / body.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 882465482479987,
													"parameters": {
														"seconds": "waitPeriod"
													}
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 386403362154401,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "player.X",
														"y": "player.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 949182900975683,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 538181439134471,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 627775907201269,
															"parameters": {
																"instance-variable": "friendly",
																"value": "true"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 566564776747487,
															"parameters": {
																"instance-variable": "piercing",
																"value": "true"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 219871539643286,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 654345003499265,
															"parameters": {
																"instance-variable": "range",
																"value": "RANGE"
															}
														},
														{
															"type": "comment",
															"text": "Extract the multiplier from the description in the abilities table"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 122113430221285,
															"parameters": {
																"instance-variable": "slashDamage",
																"value": "player.slashDamage"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 203284545712089,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 916907229168168,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 569838120045733,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "player.MoveTo.MovingAngle"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 550788800309276,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 263646178312284,
															"parameters": {
																"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 498369235108382,
															"parameters": {
																"group-name": "\"movement and interaction\"",
																"state": "activated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 901436658511844,
															"parameters": {
																"group-name": "\"facings\"",
																"state": "activated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 292039343156680,
															"parameters": {
																"group-name": "\"abilities\"",
																"state": "activated"
															}
														},
														{
															"callFunction": "updateAnimations",
															"sid": 710147091703558,
															"parameters": [
																"\"idle\"",
																"body.OriginalAnimationSpeed",
																"\"playFromBeginning\""
															]
														}
													],
													"sid": 737877903865695
												}
											]
										}
									]
								},
								{
									"functionName": "heroicStrike",
									"functionDescription": "",
									"functionCategory": "abilities",
									"functionReturnType": "none",
									"functionCopyPicked": false,
									"functionIsAsync": false,
									"functionParameters": [],
									"eventType": "function-block",
									"conditions": [],
									"actions": [],
									"sid": 839839600918941,
									"children": [
										{
											"eventType": "variable",
											"name": "MANA_COST",
											"type": "number",
											"initialValue": "10",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 417560487113981
										},
										{
											"eventType": "variable",
											"name": "PROJECTILE_SPEED",
											"type": "number",
											"initialValue": "700",
											"comment": "The speed of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 533709240996136
										},
										{
											"eventType": "variable",
											"name": "MANIFESTATION_FRAME",
											"type": "number",
											"initialValue": "4",
											"comment": "The (0-based) frame in which the projectile should manifest",
											"isStatic": false,
											"isConstant": true,
											"sid": 198117948289843
										},
										{
											"eventType": "variable",
											"name": "SIZE",
											"type": "number",
											"initialValue": "126",
											"comment": "The size of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 350014471127298
										},
										{
											"eventType": "variable",
											"name": "RANGE",
											"type": "number",
											"initialValue": "150",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 160173397656657
										},
										{
											"eventType": "variable",
											"name": "waitPeriod",
											"type": "number",
											"initialValue": "0",
											"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
											"isStatic": true,
											"isConstant": false,
											"sid": 572448180230308
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 108778444465957,
													"parameters": {
														"object": "gear",
														"expression": "gear.type",
														"comparison": 0,
														"value": "\"mainHand\""
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 153876308713924,
													"parameters": {
														"instance-variable": "currentMana",
														"comparison": 5,
														"value": "MANA_COST"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "must have a weapon equipped and enough mana"
												},
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 708904478501512,
													"parameters": {
														"instance-variable": "currentMana",
														"value": "MANA_COST"
													}
												},
												{
													"id": "stop",
													"objectClass": "player",
													"sid": 862574879045827,
													"behaviorType": "MoveTo"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 554829003786200,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "0"
													}
												},
												{
													"callFunction": "updateFacing",
													"sid": 737373599081057,
													"parameters": [
														"mouse.X",
														"mouse.Y"
													]
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 836864039443408,
													"parameters": {
														"group-name": "\"movement and interaction\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 710736552891004,
													"parameters": {
														"group-name": "\"abilities\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 546480801579905,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 452672347087041,
													"parameters": {
														"animation": "\"upwardSlash_\" & player.degrees",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-speed",
													"objectClass": "body",
													"sid": 238405076457835,
													"parameters": {
														"speed": "player.actionSpeed"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 134787444557260,
													"parameters": {
														"variable": "waitPeriod",
														"value": "TICKS_PER_SECOND / body.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 927289292114547,
													"parameters": {
														"seconds": "waitPeriod"
													}
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 850293852307025,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "player.X",
														"y": "player.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 711031212314139,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 599495591871293,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 213398293916739,
															"parameters": {
																"instance-variable": "friendly",
																"value": "true"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 413351075493280,
															"parameters": {
																"instance-variable": "piercing",
																"value": "true"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 261871274462356,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 702534395324628,
															"parameters": {
																"instance-variable": "range",
																"value": "RANGE"
															}
														},
														{
															"type": "comment",
															"text": "Extract the multiplier from the description in the abilities table"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 408008704611028,
															"parameters": {
																"instance-variable": "slashDamage",
																"value": "player.slashDamage + (player.slashDamage * int(tokenat(tokenat(Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"description\"), 1, \"{\"), 0, \"}\")) / PERCENTAGE_DIVIDER)"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 463900277504500,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 826323290718197,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 461912268088400,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "player.MoveTo.MovingAngle"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 849894527277260,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 381155470199995,
															"parameters": {
																"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 381453661601787,
															"parameters": {
																"group-name": "\"movement and interaction\"",
																"state": "activated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 722086422079796,
															"parameters": {
																"group-name": "\"facings\"",
																"state": "activated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 171776864818288,
															"parameters": {
																"group-name": "\"abilities\"",
																"state": "activated"
															}
														},
														{
															"callFunction": "updateAnimations",
															"sid": 852441723348355,
															"parameters": [
																"\"idle\"",
																"body.OriginalAnimationSpeed",
																"\"playFromBeginning\""
															]
														}
													],
													"sid": 713383358241408
												}
											]
										}
									]
								},
								{
									"functionName": "kick",
									"functionDescription": "",
									"functionCategory": "abilities",
									"functionReturnType": "none",
									"functionCopyPicked": false,
									"functionIsAsync": false,
									"functionParameters": [],
									"eventType": "function-block",
									"conditions": [],
									"actions": [],
									"sid": 290580718640533,
									"children": [
										{
											"eventType": "variable",
											"name": "MANA_COST",
											"type": "number",
											"initialValue": "15",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 805583856394294
										},
										{
											"eventType": "variable",
											"name": "PROJECTILE_SPEED",
											"type": "number",
											"initialValue": "750",
											"comment": "The speed of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 942361250198733
										},
										{
											"eventType": "variable",
											"name": "MANIFESTATION_FRAME",
											"type": "number",
											"initialValue": "11",
											"comment": "The (0-based) frame in which the projectile should manifest",
											"isStatic": false,
											"isConstant": true,
											"sid": 391823997414929
										},
										{
											"eventType": "variable",
											"name": "SIZE",
											"type": "number",
											"initialValue": "81",
											"comment": "The size of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 116879530591196
										},
										{
											"eventType": "variable",
											"name": "RANGE",
											"type": "number",
											"initialValue": "140",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 497218368664766
										},
										{
											"eventType": "variable",
											"name": "waitPeriod",
											"type": "number",
											"initialValue": "0",
											"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
											"isStatic": true,
											"isConstant": false,
											"sid": 614747833636651
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 597348949560689,
													"parameters": {
														"instance-variable": "currentMana",
														"comparison": 5,
														"value": "MANA_COST"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "must have enough mana"
												},
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 528358559109335,
													"parameters": {
														"instance-variable": "currentMana",
														"value": "MANA_COST"
													}
												},
												{
													"id": "stop",
													"objectClass": "player",
													"sid": 839605841853783,
													"behaviorType": "MoveTo"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 750017637587517,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "0"
													}
												},
												{
													"callFunction": "updateFacing",
													"sid": 165179622562217,
													"parameters": [
														"mouse.X",
														"mouse.Y"
													]
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 296921487201208,
													"parameters": {
														"group-name": "\"movement and interaction\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 485259643737557,
													"parameters": {
														"group-name": "\"abilities\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 133725184714588,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 860271895096737,
													"parameters": {
														"animation": "\"kick_\" & player.degrees",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-speed",
													"objectClass": "body",
													"sid": 719433091172841,
													"parameters": {
														"speed": "player.actionSpeed"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 818473485472813,
													"parameters": {
														"variable": "waitPeriod",
														"value": "TICKS_PER_SECOND / body.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 137666847375384,
													"parameters": {
														"seconds": "waitPeriod"
													}
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 821691894303339,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "player.X",
														"y": "player.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 342398433737835,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 312462690445445,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 726419828519088,
															"parameters": {
																"instance-variable": "friendly",
																"value": "true"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 957511065671967,
															"parameters": {
																"instance-variable": "piercing",
																"value": "true"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 111874836506501,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 653725228886798,
															"parameters": {
																"instance-variable": "range",
																"value": "RANGE"
															}
														},
														{
															"type": "comment",
															"text": "Extract the multiplier from the description in the abilities table"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 367208043762125,
															"parameters": {
																"instance-variable": "smashDamage",
																"value": "player.smashDamage"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 914348958856246,
															"parameters": {
																"instance-variable": "knockbackDistance",
																"value": "100"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 229612355171099,
															"parameters": {
																"instance-variable": "knockbackSpeed",
																"value": "500"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 552104400312452,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 518875130668534,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 144133384775022,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "player.MoveTo.MovingAngle"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 293245551588915,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 866349173121340,
															"parameters": {
																"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 113942480278273,
															"parameters": {
																"group-name": "\"movement and interaction\"",
																"state": "activated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 678448174935693,
															"parameters": {
																"group-name": "\"facings\"",
																"state": "activated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 259936006986324,
															"parameters": {
																"group-name": "\"abilities\"",
																"state": "activated"
															}
														},
														{
															"callFunction": "updateAnimations",
															"sid": 504213194725024,
															"parameters": [
																"\"idle\"",
																"body.OriginalAnimationSpeed",
																"\"playFromBeginning\""
															]
														}
													],
													"sid": 125045940678337
												}
											]
										}
									]
								}
							],
							"sid": 893967530718635
						}
					],
					"sid": 600857244900806
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "animations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "gear",
									"sid": 918420809278874,
									"parameters": {
										"animation": "body.AnimationName",
										"from": "current-frame"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "gear",
									"sid": 985026365790824,
									"parameters": {
										"frame-number": "body.AnimationFrame"
									}
								}
							],
							"sid": 568021042849555
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-frame-changed",
									"objectClass": "body",
									"sid": 409557183449858
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "To completely get rid of the incorrect height and width values, we need to have this run every tick, however, there's no actual different outcome"
								},
								{
									"type": "comment",
									"text": "https://github.com/Scirra/Construct-3-bugs/issues/5895",
									"text-color": [
										0,
										0,
										1,
										1
									],
									"background-color": [
										1,
										1,
										1,
										1
									]
								},
								{
									"id": "set-scale",
									"objectClass": "body",
									"sid": 375932065893818,
									"parameters": {
										"scale": "1"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "gear",
									"sid": 454439231883482,
									"parameters": {
										"scale": "1"
									}
								}
							],
							"sid": 560213321966011
						},
						{
							"functionName": "updateAnimations",
							"functionDescription": "Change the player's animation.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "which animation to play",
									"sid": 308447533896746
								},
								{
									"name": "animationSpeed",
									"type": "number",
									"initialValue": "10",
									"comment": "how fast the animation plays",
									"sid": 938843169588506
								},
								{
									"name": "startPoint",
									"type": "string",
									"initialValue": "playFromBeginning",
									"comment": "",
									"sid": 930634823243599
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "startPoint is a string because it needs to get passed from an ability"
								}
							],
							"sid": 949345204534566,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 144076295106404,
											"parameters": {
												"variable": "startPoint",
												"comparison": 0,
												"value": "\"playFromBeginning\""
											}
										}
									],
									"actions": [],
									"sid": 677168092068879,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 392818208108379,
													"parameters": {
														"object": "nonCombatArea"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 949731453876850,
													"parameters": {
														"animation": "animationName & \"Unarmed_\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 698798497685117
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 404852243674637
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 891147137616039,
													"parameters": {
														"animation": "animationName & \"_\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 325151199826490
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 231308396923232
										}
									],
									"actions": [],
									"sid": 834228980308368,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 124338315118198,
													"parameters": {
														"object": "nonCombatArea"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 552711159272530,
													"parameters": {
														"animation": "animationName & \"Unarmed_\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 419077934913228
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 927310848662319
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 679455878213392,
													"parameters": {
														"animation": "animationName & \"_\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 937174547054673
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "this has to be done after the animation is set, so it goes in a blank event, instead of repeating it"
										},
										{
											"id": "set-animation-speed",
											"objectClass": "body",
											"sid": 227155609644533,
											"parameters": {
												"speed": "animationSpeed"
											}
										}
									],
									"sid": 604915883843805
								}
							]
						},
						{
							"functionName": "channeledAnimation",
							"functionDescription": "Play an animation where the player is uncontrollable.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "The animation to play.",
									"sid": 234166732811254
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "stop",
									"objectClass": "player",
									"sid": 415479509316204,
									"behaviorType": "MoveTo"
								},
								{
									"callFunction": "updateAnimations",
									"sid": 592922038118624,
									"parameters": [
										"animationName",
										"body.OriginalAnimationSpeed",
										"\"playFromBeginning\""
									]
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 182083514171421,
									"parameters": {
										"group-name": "\"movement and interaction\"",
										"state": "deactivated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 165409029238706,
									"parameters": {
										"group-name": "\"abilities\"",
										"state": "deactivated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 703320316572271,
									"parameters": {
										"group-name": "\"facings\"",
										"state": "deactivated"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 501026766251883,
									"parameters": {
										"seconds": "body.AnimationFrameCount / TICKS_PER_SECOND"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 775379687103667,
									"parameters": {
										"group-name": "\"movement and interaction\"",
										"state": "activated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 818422607278468,
									"parameters": {
										"group-name": "\"facings\"",
										"state": "activated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 830387083707417,
									"parameters": {
										"group-name": "\"abilities\"",
										"state": "activated"
									}
								},
								{
									"callFunction": "updateAnimations",
									"sid": 232904452025142,
									"parameters": [
										"\"idle\"",
										"body.OriginalAnimationSpeed",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 241724089671820
						}
					],
					"sid": 121151613548917
				}
			],
			"sid": 254080374675516
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "overlay",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "settings",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-clicked",
									"objectClass": "shadows",
									"sid": 878818799881212
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: If this checkbox gets spammed, it might cause problems"
								}
							],
							"sid": 244022475371789,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "shadows",
											"sid": 554532696313372
										},
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 854294652366274,
											"parameters": {
												"object": "hasShadow"
											}
										}
									],
									"actions": [
										{
											"callFunction": "spawnShadows",
											"sid": 836230612106996
										}
									],
									"sid": 151709082605452
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "shadows",
											"sid": 896903373419417,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "shadow",
											"sid": 920179466175367
										},
										{
											"type": "comment",
											"text": "a wait 0 here being the official recommended way to unload images after destroying them, according to the manual"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 183045845632500,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "unload-object-images",
											"objectClass": "System",
											"sid": 111126715296548,
											"parameters": {
												"object": "shadow"
											}
										}
									],
									"sid": 606708545399068
								}
							]
						}
					],
					"sid": 594124344109029
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "ability bar",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 551496541279165,
									"parameters": {
										"tag": "\"setAbilities\""
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 707055531504507,
									"parameters": {
										"object": "abilitySlot"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "for each ability cover, create the appropriate ability on the same layer as that cover"
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 703115001635694,
									"parameters": {
										"object-name": "body.ObjectTypeName & \"_ability\"",
										"layer": "abilitySlot.LayerName",
										"x": "abilitySlot.X",
										"y": "abilitySlot.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 699935747304531,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 831544315515473,
											"parameters": {
												"object": "ability"
											}
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "ability",
											"sid": 421956783211698,
											"parameters": {
												"mode": "disable",
												"effect": "\"Grayscale\""
											}
										},
										{
											"id": "set-effect-parameter",
											"objectClass": "ability",
											"sid": 364167940092383,
											"parameters": {
												"effect": "\"Grayscale\"",
												"parameter-index": "0",
												"value": "100"
											}
										},
										{
											"id": "add-child",
											"objectClass": "abilitySlot",
											"sid": 419678936034716,
											"parameters": {
												"child": "ability",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": true,
												"transform-o": false,
												"transform-z-elevation": true,
												"transform-visibility": false,
												"destroy-with-parent": false
											}
										}
									],
									"sid": 414672886242503
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-click",
									"objectClass": "mouse",
									"sid": 166153498320785,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 787939671581480,
									"parameters": {
										"object": "abilitySlot"
									},
									"isInverted": true
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 521994085679042,
									"parameters": {
										"object": "statue"
									},
									"isInverted": true
								},
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 645893643706577,
									"parameters": {
										"layer": "\"abilitySelector\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "close the ability selector if we click anywhere that's not an ability or statue"
								},
								{
									"callFunction": "closeLayer",
									"sid": 266146458793314,
									"parameters": [
										"\"abilitySelector\""
									]
								},
								{
									"callFunction": "setCoverHightlight",
									"sid": 631288369787676,
									"parameters": [
										false
									]
								}
							],
							"sid": 520831656298993
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-released",
									"objectClass": "mouse",
									"sid": 230212459618653,
									"parameters": {
										"mouse-button": "left"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 116681259991173,
									"parameters": {
										"object": "ability"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "ability",
									"sid": 163607170891846,
									"parameters": {
										"animation": "\"none\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when we click an ability that's not set to 'none'..."
								},
								{
									"type": "comment",
									"text": "left mouse released instead of 'on click', so when the ability selector is closed after choosing an ability, the click isn't also registered and moves the player"
								}
							],
							"sid": 888951027546163,
							"children": [
								{
									"eventType": "variable",
									"name": "abilityUID",
									"type": "number",
									"initialValue": "0",
									"comment": "the ability's UID, use solely to set the glow effect",
									"isStatic": true,
									"isConstant": false,
									"sid": 726146004487848
								},
								{
									"eventType": "variable",
									"name": "currentAbility",
									"type": "string",
									"initialValue": "",
									"comment": "the ability that's current chosen for the displayed class of abilities",
									"isStatic": true,
									"isConstant": false,
									"sid": 998769302146377
								},
								{
									"eventType": "variable",
									"name": "selectedAbility",
									"type": "string",
									"initialValue": "",
									"comment": "The ability in the ability selector that was selected",
									"isStatic": true,
									"isConstant": false,
									"sid": 451349966261905
								},
								{
									"eventType": "variable",
									"name": "currentCategory",
									"type": "string",
									"initialValue": "",
									"comment": "the class of abilities that's currently being displayed",
									"isStatic": true,
									"isConstant": false,
									"sid": 672748660792463
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "ability",
											"sid": 131501295979639,
											"parameters": {
												"layer": "\"abilityBar\""
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "ability",
											"sid": 528251545987983,
											"parameters": {
												"parent": "abilitySlot",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it's on the ability bar..."
										}
									],
									"sid": 208998898503068,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 925518533361833,
													"parameters": {
														"layer": "\"abilitySelector\""
													}
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 996328531262219,
													"parameters": {
														"variable": "currentCategory",
														"comparison": 0,
														"value": "Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"category\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the class of the clicked ability is the one that's already being displayed, just close the ability selector"
												},
												{
													"callFunction": "closeLayer",
													"sid": 851728876144982,
													"parameters": [
														"\"abilitySelector\""
													]
												},
												{
													"callFunction": "setCoverHightlight",
													"sid": 386774398821656,
													"parameters": [
														false
													]
												}
											],
											"sid": 816106086978843
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 804338414293539
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "otherwise, open the ability selector and show the relevant abilities"
												},
												{
													"callFunction": "setCoverHightlight",
													"sid": 177523294220788,
													"parameters": [
														true
													]
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 988164220318512,
													"parameters": {
														"variable": "abilityUID",
														"value": "ability.UID"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 605454855294263,
													"parameters": {
														"variable": "currentAbility",
														"value": "ability.AnimationName"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 331646563762280,
													"parameters": {
														"variable": "currentCategory",
														"value": "Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"category\")"
													}
												},
												{
													"callFunction": "openLayer",
													"sid": 671087962683915,
													"parameters": [
														"\"abilitySelector\""
													]
												}
											],
											"sid": 552225060590609,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for",
															"objectClass": "System",
															"sid": 770594899934171,
															"parameters": {
																"name": "\"\"",
																"start-index": "1",
																"end-index": "abilitiesArray.Height - 1"
															}
														},
														{
															"id": "compare-at-xy",
															"objectClass": "abilitiesArray",
															"sid": 536294436707036,
															"parameters": {
																"x": "Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"category\")",
																"y": "loopindex",
																"comparison": 0,
																"value": "currentCategory"
															}
														},
														{
															"id": "compare-at-xy",
															"objectClass": "abilitiesArray",
															"sid": 747483695361926,
															"parameters": {
																"x": "Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"level\")",
																"y": "loopindex",
																"comparison": 3,
																"value": "player.level"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "populate the abilityOptionsArray with abilities that are of the matching class and meet the level requirement"
														},
														{
															"type": "comment",
															"text": "TODO: If the player levels up with the ability selector open, any new abilities won't show up. Is it even possible to level up with the ability selector open? Should we just close the ability selector on level-up?"
														},
														{
															"id": "push",
															"objectClass": "abilityOptionsArray",
															"sid": 257492307908906,
															"parameters": {
																"where": "front",
																"value": "abilitiesArray.At(Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"simpleName\"), loopindex)",
																"axis": "x"
															}
														}
													],
													"sid": 708255959243154
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 982520047288136,
															"parameters": {
																"object": "ability"
															}
														}
													],
													"actions": [],
													"sid": 728722378298061,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 926374187397733,
																	"parameters": {
																		"object": "ability",
																		"expression": "ability.LayerName",
																		"comparison": 0,
																		"value": "\"abilitySelector\""
																	}
																},
																{
																	"id": "for-each",
																	"objectClass": "System",
																	"sid": 103986784995558,
																	"parameters": {
																		"object": "ability"
																	}
																}
															],
															"actions": [],
															"sid": 622889163515134,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "is-empty",
																			"objectClass": "abilityOptionsArray",
																			"sid": 218549028970161
																		}
																	],
																	"actions": [
																		{
																			"id": "set-animation",
																			"objectClass": "ability",
																			"sid": 741180166312704,
																			"parameters": {
																				"animation": "\"none\"",
																				"from": "beginning"
																			}
																		}
																	],
																	"sid": 208781154702523
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "else",
																			"objectClass": "System",
																			"sid": 421791918312952
																		}
																	],
																	"actions": [
																		{
																			"id": "set-animation",
																			"objectClass": "ability",
																			"sid": 277887591088732,
																			"parameters": {
																				"animation": "abilityOptionsArray.Back",
																				"from": "beginning"
																			}
																		},
																		{
																			"id": "pop",
																			"objectClass": "abilityOptionsArray",
																			"sid": 771062483134409,
																			"parameters": {
																				"where": "back",
																				"axis": "x"
																			}
																		}
																	],
																	"sid": 704351852125970
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 992399196919024,
																			"parameters": {
																				"object": "ability",
																				"expression": "ability.AnimationName",
																				"comparison": 0,
																				"value": "currentAbility"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-effect-enabled",
																			"objectClass": "ability",
																			"sid": 238085019319847,
																			"parameters": {
																				"mode": "enable",
																				"effect": "\"Grayscale\""
																			}
																		}
																	],
																	"sid": 954936503658220
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 148325386910517,
																			"parameters": {
																				"object": "ability",
																				"expression": "ability.AnimationName",
																				"comparison": 1,
																				"value": "currentAbility"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-effect-enabled",
																			"objectClass": "ability",
																			"sid": 145603175504239,
																			"parameters": {
																				"mode": "disable",
																				"effect": "\"Grayscale\""
																			}
																		}
																	],
																	"sid": 674591081863892
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 152656832815296,
																	"parameters": {
																		"object": "ability",
																		"expression": "ability.UID",
																		"comparison": 1,
																		"value": "abilityUID"
																	}
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 784947759337350,
																	"parameters": {
																		"object": "abilitySlot"
																	}
																},
																{
																	"id": "pick-parent",
																	"objectClass": "ability",
																	"sid": 323380240398685,
																	"parameters": {
																		"parent": "abilitySlot",
																		"which": "own"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "setCoverHightlight",
																	"sid": 744253514949944,
																	"parameters": [
																		false
																	]
																}
															],
															"sid": 620014128918085
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 197310871060374
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if we clicked on an ability option..."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 727347019975754,
											"parameters": {
												"variable": "selectedAbility",
												"value": "ability.AnimationName"
											}
										},
										{
											"callFunction": "setCoverHightlight",
											"sid": 567073269370095,
											"parameters": [
												false
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 127468865291980,
											"parameters": [
												"\"abilitySelector\""
											]
										}
									],
									"sid": 913381454522330,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 855871030350454,
													"parameters": {
														"object": "ability"
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "ability",
													"sid": 751269906242521,
													"parameters": {
														"animation": "currentAbility"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "ability",
													"sid": 741897931232925,
													"parameters": {
														"animation": "selectedAbility",
														"from": "beginning"
													}
												}
											],
											"sid": 923600810680650
										}
									]
								}
							]
						},
						{
							"functionName": "setCoverHightlight",
							"functionDescription": "Turns the highlight of an ability cover on or off",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "on",
									"type": "boolean",
									"initialValue": "false",
									"comment": "whether to turn the highlight on or off",
									"sid": 629415599733892
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 342338163426331,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 931218441751746,
											"parameters": {
												"variable": "on"
											}
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "abilitySlot",
											"sid": 654147713762156,
											"parameters": {
												"mode": "enable",
												"effect": "\"Brightness\""
											}
										}
									],
									"sid": 611467681715653
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 294577515846640
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "abilitySlot",
											"sid": 711173797562710,
											"parameters": {
												"mode": "disable",
												"effect": "\"Brightness\""
											}
										}
									],
									"sid": 902932743069428
								}
							]
						}
					],
					"sid": 600010803561002
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "menus",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drag-start",
									"objectClass": "statue",
									"sid": 604836220159451,
									"behaviorType": "DragDrop"
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "disable anchoring when we move a statue, and don't turn it back on until we reset the settings"
								},
								{
									"id": "set-enabled",
									"objectClass": "statue",
									"sid": 415687442313234,
									"behaviorType": "Anchor",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "move-layer",
									"objectClass": "System",
									"sid": 514606985739261,
									"parameters": {
										"layer": "statue.LayerName",
										"insert-by": "\"tooltip\"",
										"where": "below"
									}
								}
							],
							"sid": 538423186911769
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 783488370144269,
									"parameters": {
										"layer": "\"escapeMenu\""
									},
									"isInverted": true
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 767964414839531,
									"parameters": {
										"layer": "\"settingsMenu\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "you can only open game menus when the game isn't paused"
								}
							],
							"sid": 589869390653306,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 598601637453541,
											"parameters": {
												"key": 67
											}
										}
									],
									"actions": [],
									"sid": 178878258421278,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-interactive",
													"objectClass": "System",
													"sid": 869535471606522,
													"parameters": {
														"layer": "\"characterMenu\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "closeLayer",
													"sid": 917867284245243,
													"parameters": [
														"\"characterMenu\""
													]
												}
											],
											"sid": 262009421223096
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 753520278789364
												}
											],
											"actions": [
												{
													"callFunction": "openLayer",
													"sid": 349067267734666,
													"parameters": [
														"\"characterMenu\""
													]
												}
											],
											"sid": 497647737905739
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 370431537167266,
											"parameters": {
												"key": 73
											}
										}
									],
									"actions": [],
									"sid": 737222622995605,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-interactive",
													"objectClass": "System",
													"sid": 387601690380153,
													"parameters": {
														"layer": "\"inventoryMenu\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "closeLayer",
													"sid": 662212905681547,
													"parameters": [
														"\"inventoryMenu\""
													]
												}
											],
											"sid": 428106017687038
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 586412931600477
												}
											],
											"actions": [
												{
													"callFunction": "openLayer",
													"sid": 640706410167039,
													"parameters": [
														"\"inventoryMenu\""
													]
												}
											],
											"sid": 428606722325241
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 190862893393706,
											"parameters": {
												"key": 27
											}
										}
									],
									"actions": [
										{
											"callFunction": "closeDialog",
											"sid": 436185292278617
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 866498944092759,
											"parameters": {
												"layer": "\"main\"",
												"interactive": false
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 913446666074020,
											"parameters": {
												"layer": "\"abilityBar\"",
												"interactive": false
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 320766050784367,
											"parameters": {
												"layer": "\"background\"",
												"interactive": false
											}
										},
										{
											"callFunction": "closeLayer",
											"sid": 653317503500515,
											"parameters": [
												"\"characterMenu\""
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 634976525456230,
											"parameters": [
												"\"inventoryMenu\""
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 268127072506266,
											"parameters": [
												"\"abilitySelector\""
											]
										},
										{
											"callFunction": "openLayer",
											"sid": 285880886589486,
											"parameters": [
												"\"escapeMenu\""
											]
										},
										{
											"id": "set-time-scale",
											"objectClass": "System",
											"sid": 491153929553650,
											"parameters": {
												"time-scale": "0"
											}
										}
									],
									"sid": 320363040752513
								}
							]
						},
						{
							"functionName": "closeLayer",
							"functionDescription": "Close the specified layer",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "menuName",
									"type": "string",
									"initialValue": "",
									"comment": "The name of the layer to close",
									"sid": 231291736061001
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 882411785524150,
									"parameters": {
										"layer": "menuName",
										"interactive": false
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 170936119734949,
									"parameters": {
										"layer": "menuName",
										"visibility": "invisible"
									}
								}
							],
							"sid": 475860601676582
						},
						{
							"functionName": "openLayer",
							"functionDescription": "Open the specified layer",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "menuName",
									"type": "string",
									"initialValue": "",
									"comment": "The name of the layer to open",
									"sid": 228302164093831
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 561058418895223,
									"parameters": {
										"layer": "menuName",
										"interactive": true
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 667878201713297,
									"parameters": {
										"layer": "menuName",
										"visibility": "visible"
									}
								}
							],
							"sid": 667271432738870
						}
					],
					"sid": 121445526787026
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "tooltip",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 981186403162279,
									"parameters": {
										"object": "item"
									}
								},
								{
									"id": "is-dragging",
									"objectClass": "item",
									"sid": 661446268155956,
									"behaviorType": "DragDrop",
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: Make sure this works with rings"
								},
								{
									"callFunction": "updateTooltip",
									"sid": 492511576570162,
									"parameters": [
										false,
										"item.fullName",
										"item.classRestrictions",
										"item.level",
										"item.mods",
										"item.lore"
									]
								}
							],
							"sid": 790194075805752,
							"children": [
								{
									"eventType": "variable",
									"name": "typeForComparison",
									"type": "string",
									"initialValue": "",
									"comment": "The type of the gear that we want to compare",
									"isStatic": true,
									"isConstant": false,
									"sid": 601592912280583
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "item",
											"sid": 144692810035873,
											"parameters": {
												"layer": "\"inventoryMenu\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the inventory, compare to the relevant equipped item, if one exists"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 900795861844406,
											"parameters": {
												"variable": "typeForComparison",
												"value": "item.type"
											}
										}
									],
									"sid": 605206569134355,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 501700459756974,
													"parameters": {
														"object": "item"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 455722943966993,
													"parameters": {
														"object": "item",
														"expression": "item.LayerName",
														"comparison": 0,
														"value": "\"characterMenu\""
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 568491989334633,
													"parameters": {
														"object": "item",
														"expression": "item.type",
														"comparison": 0,
														"value": "typeForComparison"
													}
												}
											],
											"actions": [
												{
													"callFunction": "updateComparisonTooltip",
													"sid": 987586995886080,
													"parameters": [
														"item.fullName",
														"item.classRestrictions",
														"item.level",
														"item.mods",
														"item.lore"
													]
												}
											],
											"sid": 919484608171964
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 581155306246120
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 792740501012082,
									"parameters": {
										"object": "loot"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "loot",
									"sid": 313560641429212,
									"parameters": {
										"which": "top"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "the \"else\" is for if we drag and hold an item over a loot"
								},
								{
									"callFunction": "updateTooltip",
									"sid": 761579158674167,
									"parameters": [
										false,
										"loot.fullName",
										"loot.classRestrictions",
										"loot.level",
										"loot.mods",
										"loot.lore"
									]
								}
							],
							"sid": 147156728149685
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 589066293736765
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 508854908562343,
									"parameters": {
										"object": "ability"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "ability",
									"sid": 741682250451677,
									"parameters": {
										"animation": "\"none\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "updateTooltip",
									"sid": 783253863576001,
									"parameters": [
										true,
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"fullName\")",
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"class\")",
										"int(Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"level\"))",
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"description\")",
										"\"\""
									]
								}
							],
							"sid": 363981334138353
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 321286857234222
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 796967080551416
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "tooltip",
									"sid": 798114110205421,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "comparisonTooltip",
									"sid": 735608559975432,
									"parameters": {
										"opacity": "0"
									}
								}
							],
							"sid": 736478380255083
						},
						{
							"functionName": "updateTooltip",
							"functionDescription": "update and show the tooltip with the specified information",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "isAbility",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 644466920870083
								},
								{
									"name": "name",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 655975269993235
								},
								{
									"name": "class",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 945794792643289
								},
								{
									"name": "level",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 445357807781583
								},
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 893908292176095
								},
								{
									"name": "lore",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 824750967220550
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "tooltipName",
									"sid": 534517625800845,
									"parameters": {
										"text": "name"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipClass",
									"sid": 522948856064234,
									"parameters": {
										"text": "class"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLevel",
									"sid": 645922994485869,
									"parameters": {
										"text": "\"Level \" & level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLore",
									"sid": 752447281676204,
									"parameters": {
										"text": "lore"
									}
								}
							],
							"sid": 759325424482027,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 649898746054398,
											"parameters": {
												"variable": "isAbility"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "tooltipDescription",
											"sid": 169696152975065,
											"parameters": {
												"text": "text"
											}
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipClass",
											"sid": 508058487582192,
											"parameters": {
												"color": "rgb(235, 223, 164)"
											}
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipLevel",
											"sid": 562615732621313,
											"parameters": {
												"color": "rgb(235, 223, 164)"
											}
										}
									],
									"sid": 763060192049106,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 776102274245743,
													"parameters": {
														"name": "\"\"",
														"start-index": "1",
														"end-index": "tokencount(text, \"{\") - 1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Start at 1, to always skip the first token. Subtract 1, to make it 0-based. For each set of curly brackets, multiply the contents of that set by the player level."
												},
												{
													"id": "set-text",
													"objectClass": "tooltipDescription",
													"sid": 932648006707572,
													"parameters": {
														"text": "RegexReplace(Self.Text, \"{([^}]+)}\", \"\", str(float(tokenat(tokenat(text, loopindex, \"{\"), 0, \"}\")) * player.level))"
													}
												}
											],
											"sid": 656560243045374
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 763942990940543
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "tooltipDescription",
											"sid": 450876267436261,
											"parameters": {
												"text": "\"\""
											}
										}
									],
									"sid": 646781768384696,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 401957080157648,
													"parameters": {
														"name": "\"\"",
														"start-index": "0",
														"end-index": "tokencount(text, \";\") - 2"
													}
												}
											],
											"actions": [
												{
													"id": "append-text",
													"objectClass": "tooltipDescription",
													"sid": 406451035312540,
													"parameters": {
														"text": "RegexReplace(tokenat(tokenat(text, loopindex, \";\"), 1, \":\"), \"\\{|}\", \"g\", \"\") & newline "
													}
												}
											],
											"sid": 630356183524025
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 734959368484984,
													"parameters": {
														"value": "find(class, body.ObjectTypeName) <> -1 | findCase(class, \"All Classes\") <> - 1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
												},
												{
													"id": "set-font-color",
													"objectClass": "tooltipClass",
													"sid": 690009318545707,
													"parameters": {
														"color": "rgbEx(0, 100, 0)"
													}
												}
											],
											"sid": 765991964130597,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 813739954778648
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipClass",
													"sid": 887313244913320,
													"parameters": {
														"color": "rgbEx(100, 0, 0)"
													}
												}
											],
											"sid": 699456439858615
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 696338830206071,
													"parameters": {
														"first-value": "player.level",
														"comparison": 5,
														"second-value": "level"
													}
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipLevel",
													"sid": 309880282157325,
													"parameters": {
														"color": "rgbEx(0, 100, 0)"
													}
												}
											],
											"sid": 794048442218917
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 771110532435994
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipLevel",
													"sid": 502447536210441,
													"parameters": {
														"color": "rgbEx(100, 0, 0)"
													}
												}
											],
											"sid": 196249808030852
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-ordered",
											"objectClass": "System",
											"sid": 843521397468893,
											"parameters": {
												"object": "tooltipText",
												"expression": "tooltipText.TextWidth",
												"order": "descending"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "tooltip",
											"sid": 105216766448373,
											"parameters": {
												"width": "tooltipText.TextWidth + 50"
											}
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 620375102499779
										}
									],
									"sid": 330945650350467
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "wait for the text to render. Using layer opacity or visibility will cause a stutter when changing text values"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 694290287195429,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "tooltip",
											"sid": 306451052549903,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 662762068157903
								}
							]
						},
						{
							"functionName": "updateComparisonTooltip",
							"functionDescription": "update and show the comparison tooltip with the specified information",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "name",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 910590846581926
								},
								{
									"name": "class",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 591887021608529
								},
								{
									"name": "level",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 301944540294416
								},
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 893566839981270
								},
								{
									"name": "lore",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 711926424267286
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "we can't compare abilities, so no boolean parameter for that"
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipName",
									"sid": 824814775616819,
									"parameters": {
										"text": "name"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipClass",
									"sid": 543527112959690,
									"parameters": {
										"text": "class"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipLevel",
									"sid": 824938158454118,
									"parameters": {
										"text": "\"Level \" & level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipLore",
									"sid": 575354792888595,
									"parameters": {
										"text": "lore"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipDescription",
									"sid": 399001034140106,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 943885777192739,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 829112719816767,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(text, \";\") - 2"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "comparisonTooltipDescription",
											"sid": 265087721775888,
											"parameters": {
												"text": "RegexReplace(tokenat(tokenat(text, loopindex, \";\"), 1, \":\"), \"\\{|}\", \"g\", \"\") & newline "
											}
										}
									],
									"sid": 166074427221325
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 134440797018304,
											"parameters": {
												"value": "find(class, body.ObjectTypeName) <> -1 | findCase(class, \"All Classes\") <> - 1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
										},
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipClass",
											"sid": 983222596540263,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 928300519864730,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 464183020747268
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipClass",
											"sid": 673913629937480,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 570480678051004
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 792823110178621,
											"parameters": {
												"first-value": "player.level",
												"comparison": 5,
												"second-value": "level"
											}
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipLevel",
											"sid": 570492528701475,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 103253862958061
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 246626424806030
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipLevel",
											"sid": 966203662113193,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 452964067971167
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-ordered",
											"objectClass": "System",
											"sid": 976685334015162,
											"parameters": {
												"object": "comparisonTooltipText",
												"expression": "comparisonTooltipText.TextWidth",
												"order": "descending"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "comparisonTooltip",
											"sid": 115456399313237,
											"parameters": {
												"width": "comparisonTooltipText.TextWidth + 50"
											}
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 220779688855783
										}
									],
									"sid": 758644597798527
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "wait for the text to render. Using layer opacity or visibility will cause a stutter when changing text values"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 958235739280331,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "comparisonTooltip",
											"sid": 665808019213538,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 345794445703827
								}
							]
						}
					],
					"sid": 534862555037467
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy info",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "updateEnemyInfo",
							"functionDescription": "Update an enemy's name, and clear the attributes.",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "enemyName",
									"sid": 141033310620679,
									"parameters": {
										"text": "enemy.fullName"
									}
								},
								{
									"id": "set-text",
									"objectClass": "enemyAttributes",
									"sid": 409317286234059,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 207514323582349,
							"children": [
								{
									"eventType": "variable",
									"name": "attributes",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 868891487243485
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 282617316485548,
											"parameters": {
												"variable": "attributes",
												"value": "Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", enemy.simpleName, \"attributes\")"
											}
										}
									],
									"sid": 840458797442361
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 317603452927616,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(attributes, \",\")"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "enemyAttributes",
											"sid": 350219713546243,
											"parameters": {
												"text": "tokenat(attributes, loopindex, \",\") & newline"
											}
										}
									],
									"sid": 613390831560091
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 875991590626014,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "enemyHealthFrame",
											"sid": 725478292957384,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 984462441645642
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 560016983693502,
									"parameters": {
										"object": "enemyBody"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "enemyBody",
									"sid": 941475082877777,
									"parameters": {
										"which": "top"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 795137331020642,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 107491999194856,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 960441615476776
										}
									],
									"actions": [
										{
											"callFunction": "updateEnemyInfo",
											"sid": 425571750613563
										}
									],
									"sid": 639451042301086
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "enemyName",
											"sid": 434210227725965,
											"parameters": {
												"text-to-compare": "enemy.fullName",
												"case-sensitivity": "ignore-case"
											},
											"isInverted": true
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 957637580777324
										}
									],
									"actions": [
										{
											"callFunction": "updateEnemyInfo",
											"sid": 381983047162617
										}
									],
									"sid": 866235878046209
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 154584809601562,
											"parameters": {
												"first-value": "enemyHealthBar.ImageScaleX",
												"comparison": 1,
												"second-value": "enemy.currentHealth / enemy.maxHealth * 100"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 765997918956657
										}
									],
									"actions": [
										{
											"id": "set-image-scale-x",
											"objectClass": "enemyHealthBar",
											"sid": 427298398704366,
											"parameters": {
												"scale-x": "enemy.currentHealth / enemy.maxHealth * 100"
											}
										}
									],
									"sid": 782496995465253
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 879642486780677
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 479992439038144
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "enemyHealthFrame",
									"sid": 977522645063873,
									"parameters": {
										"opacity": "0"
									}
								}
							],
							"sid": 820060221223573
						}
					],
					"sid": 407220405598445
				}
			],
			"sid": 491413826418283
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "enemies",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy generation",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 434373747254022,
									"parameters": {
										"tag": "\"generateEnemies\""
									}
								}
							],
							"actions": [],
							"sid": 258393414366867,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 650752614505575,
											"parameters": {
												"count": "1"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 615327329998570,
											"parameters": {
												"object-to-create": "enemy",
												"layer": "\"mechanics\"",
												"x": "700 + random(-100, 100)",
												"y": "1700 + random(-100, 100)",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 875219976838660,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "advancedRandom.WeightedByName(\"enemies\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 710752952393499,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "\"goblinWarlock\""
											}
										},
										{
											"id": "set-width",
											"objectClass": "enemy",
											"sid": 427898120293848,
											"parameters": {
												"width": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"size\"))"
											}
										},
										{
											"id": "set-height",
											"objectClass": "enemy",
											"sid": 933176108737590,
											"parameters": {
												"height": "Self.Width / ISOMETRIC_DIVIDER"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 400310089290897,
											"parameters": {
												"instance-variable": "arcaneDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"arcaneDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 182837757962810,
											"parameters": {
												"instance-variable": "attackSpeed",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attackSpeed\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 504830492173575,
											"parameters": {
												"instance-variable": "attributes",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attributes\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 580002954197100,
											"parameters": {
												"instance-variable": "coldDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"coldDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 624138163257823,
											"parameters": {
												"instance-variable": "corruptDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"corruptDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 611307284639910,
											"parameters": {
												"instance-variable": "fireDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fireDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 913257578666083,
											"parameters": {
												"instance-variable": "fullName",
												"value": "Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fullName\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 804358855674666,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"health\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 216145688867608,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"health\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 242373758554037,
											"parameters": {
												"instance-variable": "lightningDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"lightningDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 674841003089077,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"slashDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 179872877107735,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"smashDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 901695383750276,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"stabDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 329452382412430,
											"parameters": {
												"instance-variable": "type",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"type\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 714518405686285,
											"parameters": {
												"instance-variable": "attackRange",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attackRange\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 483035637655814,
											"parameters": {
												"instance-variable": "movementSpeed",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"movementSpeed\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 647504006577084,
											"parameters": {
												"instance-variable": "experience",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"experience\"))"
											}
										},
										{
											"type": "comment",
											"text": "This might not need to be for each enemy, we should be able to do this just once."
										},
										{
											"type": "comment",
											"text": "set a random facing on spawn, and spawn the enemy's body"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 719043212896691,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "random(-180, 180)"
											}
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 525499604242985,
											"parameters": {
												"object-name": "enemy.simpleName",
												"layer": "\"main\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 280230353193906,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 649469891952876,
													"parameters": {
														"object": "enemyBody"
													}
												}
											],
											"actions": [
												{
													"id": "add-child",
													"objectClass": "enemy",
													"sid": 764507394793625,
													"parameters": {
														"child": "enemyBody",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-o": true,
														"transform-z-elevation": false,
														"transform-visibility": false,
														"destroy-with-parent": false
													}
												},
												{
													"id": "set-animation",
													"objectClass": "enemyBody",
													"sid": 404878017931826,
													"parameters": {
														"animation": "\"walk_90\"",
														"from": "beginning"
													}
												}
											],
											"sid": 567146891182716
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 111919074606738,
											"parameters": {
												"variable": "enemiesLoaded",
												"value": "true"
											}
										}
									],
									"sid": 255136346252609
								}
							]
						}
					],
					"sid": 644327675921449
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "behaviors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "If an enemy overlaps something it shouldn't, slowly push that enemy away."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "enemy",
									"sid": 848820348799305,
									"parameters": {
										"child": "enemyBody",
										"which": "own"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 756156842270431,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Check if the player is within the enemy's alert range ellipse, and if the enemy has Line of Sight to the player."
								},
								{
									"id": "set-max-speed",
									"objectClass": "enemy",
									"sid": 647490690233509,
									"behaviorType": "MoveTo",
									"parameters": {
										"max-speed": "Functions.isometrify(Self.movementSpeed, Self.MoveTo.MovingAngle)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 189160350404076,
									"parameters": {
										"instance-variable": "degrees",
										"value": "round(angle(Self.X, Self.Y, player.X, player.Y) / ARC) * ARC = -180 ? 180 : round(angle(Self.X, Self.Y, player.X, player.Y) / ARC) * ARC"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 768129122851408,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "clamp(Self.currentHealth, 0,Self.maxHealth)"
									}
								}
							],
							"sid": 652427750865642,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "enemy",
											"sid": 209112392848397,
											"parameters": {
												"object": "enemy"
											}
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "enemy",
											"sid": 617694340787267,
											"parameters": {
												"object": "player"
											}
										}
									],
									"actions": [],
									"sid": 629417720980880,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-topbottom",
													"objectClass": "enemy",
													"sid": 399910944783713,
													"parameters": {
														"which": "bottom"
													}
												}
											],
											"actions": [
												{
													"id": "move-at-angle",
													"objectClass": "enemy",
													"sid": 269044207457037,
													"parameters": {
														"angle": "Self.MoveTo.MovingAngle - QUARTER_CIRCLE",
														"distance": "Self.MoveTo.MaxSpeed / 2 / TICKS_PER_SECOND"
													}
												}
											],
											"sid": 917479554105530
										}
									],
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "enemy",
											"sid": 705141017915169,
											"behaviorType": "MoveTo"
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 652276389003755,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 554138009673460,
											"parameters": {
												"animation": "\"walk_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "set-animation-speed",
											"objectClass": "enemyBody",
											"sid": 257889621366006,
											"parameters": {
												"speed": "enemy.movementSpeed / ANIMATION_DIVISOR"
											}
										}
									],
									"sid": 392788693894295
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "enemyBody",
											"sid": 761279903125914
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 368259386046645,
											"parameters": {
												"instance-variable": "attacking"
											},
											"isInverted": true
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 872931908531743,
											"parameters": {
												"instance-variable": "hit"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 261833859864999,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 829695051670047,
													"parameters": {
														"instance-variable": "attackRange",
														"comparison": 5,
														"value": "Functions.isometrify(distance(self.X, self.Y, player.X, player.Y), angle(Self.X, Self.Y, player.X, player.Y))"
													}
												},
												{
													"id": "pick-parent",
													"objectClass": "enemyBody",
													"sid": 615642058388745,
													"parameters": {
														"parent": "enemy",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 574594149749091,
													"parameters": {
														"instance-variable": "attacking",
														"value": "true"
													}
												},
												{
													"id": "call-mapped-function",
													"objectClass": "Functions",
													"sid": 534914157590352,
													"parameters": {
														"name": "\"enemyAbilities\"",
														"string": "enemy.simpleName",
														"forward-params": "0"
													}
												}
											],
											"sid": 987857201212044
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 189771731102224,
													"parameters": {
														"instance-variable": "attackRange",
														"comparison": 2,
														"value": "Functions.isometrify(distance(self.X, self.Y, player.X, player.Y), angle(Self.X, Self.Y, player.X, player.Y))"
													}
												}
											],
											"actions": [
												{
													"id": "move-to-object",
													"objectClass": "enemy",
													"sid": 774348983347328,
													"behaviorType": "MoveTo",
													"parameters": {
														"object": "player",
														"image-point": "0",
														"mode": "direct"
													}
												}
											],
											"sid": 274512753515069
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "enemy",
									"sid": 983401014254523,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "enemy",
									"sid": 206168022374396,
									"parameters": {
										"child": "enemyBody",
										"which": "own"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 685956716723678,
									"parameters": {
										"object": "enemyBody",
										"expression": "find(enemyBody.AnimationName, \"die\")",
										"comparison": 0,
										"value": "-1"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 558938823898829,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Pick dead enemies and their bodies. Trim down the selection of enemies to only those who are parents of bodies that aren't playing a 'die' animation."
								},
								{
									"id": "add-to-instvar",
									"objectClass": "player",
									"sid": 464114896759868,
									"parameters": {
										"instance-variable": "experience",
										"value": "enemy.experience"
									}
								},
								{
									"id": "destroy",
									"objectClass": "enemy",
									"sid": 176209762672943
								},
								{
									"id": "set-animation",
									"objectClass": "enemyBody",
									"sid": 190102022343755,
									"parameters": {
										"animation": "\"die_\" & enemy.degrees",
										"from": "beginning"
									}
								},
								{
									"callFunction": "spawnLoot",
									"sid": 179384320663119,
									"parameters": [
										"enemy.X",
										"enemy.Y"
									]
								}
							],
							"sid": 202559091975276
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-animation-finished",
									"objectClass": "enemyBody",
									"sid": 817299499657078
								}
							],
							"actions": [],
							"sid": 415067068612535,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 312526064127877,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"die\")",
												"comparison": 1,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "enemyBody",
											"sid": 468388313587758,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "1",
												"ease": "noease",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 303676678164910
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 289743565815215,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"attack\")",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 190503748693031,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 335396423518109,
											"parameters": {
												"instance-variable": "attacking",
												"value": "false"
											}
										}
									],
									"sid": 813031206383253
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 934957481402461,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"hit\")",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 181895926074327,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 493665149181990,
											"parameters": {
												"instance-variable": "attacking",
												"value": "false"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 708648942899502,
											"parameters": {
												"instance-variable": "hit",
												"value": "false"
											}
										}
									],
									"sid": 320646800313079
								}
							]
						}
					],
					"sid": 346842453318444
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy abilities",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "goblinUnderling",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 429038780345131,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "700",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 421665011073282
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "38",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 433125076602187
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "120",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 968347307715670
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 798162200338716,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 773381885453265,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 240705091466775,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"type": "comment",
											"text": "This is the amount of time between the start of the animation and the manifestation of the projectile."
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 661077253537304,
											"parameters": {
												"seconds": "TICKS_PER_SECOND / enemyBody.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 407330687199050,
											"parameters": {
												"object-to-create": "projectile",
												"layer": "\"mechanics\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 637095266380560,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 306169381692502,
													"parameters": {
														"object": "projectile"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 777565137465121,
													"parameters": {
														"instance-variable": "enabled",
														"value": "true"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 642441044173211,
													"parameters": {
														"instance-variable": "piercing",
														"value": "true"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 625256602482310,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "enemy.slashDamage"
													}
												},
												{
													"id": "set-width",
													"objectClass": "projectile",
													"sid": 406621780057284,
													"parameters": {
														"width": "SIZE"
													}
												},
												{
													"id": "set-height",
													"objectClass": "projectile",
													"sid": 297419088255885,
													"parameters": {
														"height": "Self.Width / ISOMETRIC_DIVIDER"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 499067580773091,
													"parameters": {
														"instance-variable": "range",
														"value": "enemy.attackRange"
													}
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "projectile",
													"sid": 863225987383508,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "projectile",
													"sid": 612650861946859,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
													}
												}
											],
											"sid": 977939820763027
										}
									]
								}
							]
						},
						{
							"functionName": "goblinArcher",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 266372004783406,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "600",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 740015134778544
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_POINT",
									"type": "number",
									"initialValue": "80",
									"comment": "The longest possible distance (in pixels) between the enemy origin and where the projectile visual representation should appear.. This is when they are facing directly left or right.",
									"isStatic": false,
									"isConstant": true,
									"sid": 694013683657195
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "15",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 163965109939145
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "15",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 159897247114374
								},
								{
									"eventType": "variable",
									"name": "projectileManifestationTime",
									"type": "number",
									"initialValue": "0",
									"comment": "How long it takes the projectile to get from the enemy's origin to the manifestation point",
									"isStatic": true,
									"isConstant": false,
									"sid": 228220816216230
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 411494418569165,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "The point in time when the projectile should appear differs based on which direction the enemy is facing. (i.e., the distance between the enemy's origin and hand is drastically different if he's facing left, vs. if he's facing up)"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 564225280416213,
											"parameters": {
												"variable": "projectileManifestationTime",
												"value": "Functions.isometrify(MANIFESTATION_POINT, enemy.degrees) / PROJECTILE_SPEED"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 344316499934358,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 396083681322291,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"type": "comment",
											"text": "Time the spawning of the projectile so it will pass over the manifestation point during the same frame that the the projectile's visual representation on the enemy disappears."
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 922785798570809,
											"parameters": {
												"seconds": "TICKS_PER_SECOND / enemyBody.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND - projectileManifestationTime"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 610396205495670,
											"parameters": {
												"object-to-create": "projectile",
												"layer": "\"mechanics\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 927697697940487,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 759112214299253,
													"parameters": {
														"object": "projectile"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 763337844007405,
													"parameters": {
														"instance-variable": "range",
														"value": "enemy.attackRange"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 870877868545091,
													"parameters": {
														"instance-variable": "stabDamage",
														"value": "enemy.stabDamage"
													}
												},
												{
													"id": "set-width",
													"objectClass": "projectile",
													"sid": 993569313954941,
													"parameters": {
														"width": "SIZE"
													}
												},
												{
													"id": "set-height",
													"objectClass": "projectile",
													"sid": 655843181057595,
													"parameters": {
														"height": "Self.Width / ISOMETRIC_DIVIDER"
													}
												},
												{
													"type": "comment",
													"text": "Adjust the projectile's speed to account for isometry."
												},
												{
													"type": "comment",
													"text": "If we set the angle before we set the speed, and the speed of the template projectile is 0, this projectile will only flight straight left or right."
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "projectile",
													"sid": 166018963850185,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "projectile",
													"sid": 183994928915770,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 292088751147760,
													"parameters": {
														"seconds": "projectileManifestationTime"
													}
												},
												{
													"type": "comment",
													"text": "The projectile is now at the manifestation point. Spawn the projectile's visual representation."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 649637122511183,
													"parameters": {
														"object-to-create": "crossbowBolt",
														"layer": "\"main\"",
														"x": "projectile.X",
														"y": "projectile.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 813987427983861,
													"parameters": {
														"instance-variable": "enabled",
														"value": "true"
													}
												}
											],
											"sid": 733227132886190,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 688533767880599,
															"parameters": {
																"object": "crossbowBolt"
															}
														}
													],
													"actions": [
														{
															"id": "set-animation",
															"objectClass": "crossbowBolt",
															"sid": 950018422987991,
															"parameters": {
																"animation": "str(enemy.degrees)",
																"from": "beginning"
															}
														},
														{
															"id": "add-child",
															"objectClass": "projectile",
															"sid": 435817321659889,
															"parameters": {
																"child": "crossbowBolt",
																"transform-x": true,
																"transform-y": true,
																"transform-w": false,
																"transform-h": false,
																"transform-a": true,
																"transform-o": true,
																"transform-z-elevation": true,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														}
													],
													"sid": 591159171678089
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "goblinWarlock",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 195491233080812,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "600",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 369324009696675
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_POINT",
									"type": "number",
									"initialValue": "100",
									"comment": "The longest possible distance (in pixels) between the enemy origin and where the projectile visual representation should appear.. This is when they are facing directly left or right.",
									"isStatic": false,
									"isConstant": true,
									"sid": 768361143392393
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "10",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 521281225561699
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "30",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 311141190353756
								},
								{
									"eventType": "variable",
									"name": "projectileManifestationTime",
									"type": "number",
									"initialValue": "0",
									"comment": "How long it takes the projectile to get from the enemy's origin to the manifestation point",
									"isStatic": true,
									"isConstant": false,
									"sid": 135630290224051
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 398729890238329,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 124188989084013,
											"parameters": {
												"variable": "projectileManifestationTime",
												"value": "Functions.isometrify(MANIFESTATION_POINT, enemy.degrees) / PROJECTILE_SPEED"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 504078988693406,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 579305051478491,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 342374240170874,
											"parameters": {
												"seconds": "TICKS_PER_SECOND / enemyBody.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND - projectileManifestationTime"
											}
										}
									],
									"sid": 493235774122151,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 285805991759328,
													"parameters": {
														"instance-variable": "hit"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy was hit between the time when the attack started, but before the projectile was generated, cease continuation with the attack."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 469502575992036,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "enemy.X",
														"y": "enemy.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 561465114721611,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 646588341210602,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 555217025714282,
															"parameters": {
																"instance-variable": "range",
																"value": "enemy.attackRange"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 250729036068441,
															"parameters": {
																"instance-variable": "lightningDamage",
																"value": "enemy.lightningDamage"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 851506649190779,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 226605164943253,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 352335505658191,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 199188507633963,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 782251004938865,
															"parameters": {
																"seconds": "projectileManifestationTime"
															}
														},
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 162586936319832,
															"parameters": {
																"object-to-create": "lightningOrb",
																"layer": "\"main\"",
																"x": "projectile.X",
																"y": "projectile.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 276295156620133,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														}
													],
													"sid": 128093128862648,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-last-created",
																	"objectClass": "System",
																	"sid": 238163367629294,
																	"parameters": {
																		"object": "lightningOrb"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-child",
																	"objectClass": "projectile",
																	"sid": 509425320795648,
																	"parameters": {
																		"child": "lightningOrb",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": true,
																		"transform-o": true,
																		"transform-z-elevation": true,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																}
															],
															"sid": 580403643807865
														}
													]
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 353498742385237
				}
			],
			"sid": 617251843840566
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "shadows",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "we tried a lot of different things to get shadows to stay immediately behind their hasShadow. A 'for' loop over the shadows moving them behind their hasShadow didn't work, neither did the Z elevation hierarchy parameter. We just decided to make shadows sortable, that seems to be working."
				},
				{
					"functionName": "spawnShadows",
					"functionDescription": "Spawn the shadow of an object.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 456650011814749,
							"parameters": {
								"object-name": "hasShadow.ObjectTypeName & \"_shadow\"",
								"layer": "hasShadow.LayerName",
								"x": "hasShadow.X",
								"y": "hasShadow.Y - 1",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 122326320160649,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 536976280938980,
									"parameters": {
										"object": "shadow"
									}
								}
							],
							"actions": [
								{
									"id": "add-child",
									"objectClass": "hasShadow",
									"sid": 241530028593238,
									"parameters": {
										"child": "shadow",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": true,
										"transform-o": true,
										"transform-z-elevation": false,
										"transform-visibility": true,
										"destroy-with-parent": true
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "shadow",
									"sid": 892055560219421,
									"parameters": {
										"opacity": "50"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "shadow",
									"sid": 967102842334003,
									"parameters": {
										"effect": "\"BlurHorizontal\"",
										"parameter-index": "0",
										"value": "75"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "shadow",
									"sid": 611025268084507,
									"parameters": {
										"effect": "\"BlurVertical\"",
										"parameter-index": "0",
										"value": "75"
									}
								}
							],
							"sid": 874584007285148
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-parent",
							"objectClass": "shadow",
							"sid": 721771950880500,
							"parameters": {
								"parent": "hasShadow",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "shadow",
							"sid": 724704673527402,
							"parameters": {
								"animation": "hasShadow.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "shadow",
							"sid": 179496891440497,
							"parameters": {
								"frame-number": "hasShadow.AnimationFrame"
							}
						}
					],
					"sid": 365044933941635
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "hasShadow",
							"sid": 446392350790686
						},
						{
							"id": "is-checked",
							"objectClass": "shadows",
							"sid": 652894087172699
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "spawn shadows during the game for things that need them, if it's not during a loading screen"
						},
						{
							"callFunction": "spawnShadows",
							"sid": 989790559126505
						}
					],
					"sid": 160921299784915
				}
			],
			"sid": 538206850780870
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "projectiles",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-distance-travelled",
							"objectClass": "projectile",
							"sid": 945441159530041,
							"behaviorType": "Bullet",
							"parameters": {
								"comparison": 5,
								"distance": "Functions.isometrify(Self.range, Self.Bullet.AngleOfMotion)"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "projectile",
							"sid": 785391520212267
						}
					],
					"sid": 585039691434774
				},
				{
					"eventType": "comment",
					"text": "TODO: Add all other damage types"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "projectile",
							"sid": 866965572546389,
							"parameters": {
								"instance-variable": "enabled"
							}
						}
					],
					"actions": [],
					"sid": 932202329358705,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "projectile",
									"sid": 703840981642531,
									"parameters": {
										"object": "enemy"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "projectile",
									"sid": 790358766814217,
									"parameters": {
										"instance-variable": "friendly"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "enemy",
									"sid": 868142860697604,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "projectile.slashDamage * (1 - Self.physicalResistance)"
									}
								},
								{
									"id": "subtract-from-instvar",
									"objectClass": "enemy",
									"sid": 601406039109145,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "projectile.smashDamage * (1 - Self.physicalResistance)"
									}
								},
								{
									"id": "set-max-speed",
									"objectClass": "enemy",
									"sid": 429298093959011,
									"behaviorType": "knockback",
									"parameters": {
										"max-speed": "projectile.knockbackSpeed"
									}
								},
								{
									"id": "move-to-position",
									"objectClass": "enemy",
									"sid": 589815178054577,
									"behaviorType": "knockback",
									"parameters": {
										"x": "Self.X + projectile.knockbackDistance * cos(projectile.Bullet.AngleOfMotion)",
										"y": "Self.Y + projectile.knockbackDistance * sin(projectile.Bullet.AngleOfMotion)",
										"mode": "direct"
									}
								}
							],
							"sid": 673936274587997,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "projectile",
											"sid": 930689339639153,
											"parameters": {
												"instance-variable": "piercing"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "projectile",
											"sid": 712906424152491
										}
									],
									"sid": 647399467179630
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 331025693013030,
											"parameters": {
												"first-value": "find(enemy.attributes, \"Unflinching\")",
												"comparison": 0,
												"second-value": "-1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 625263807415948,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 4,
												"value": "0"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 950502115769861,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 364016656038379,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Hitstun the enemy, as long as they aren't Unflinching and the projectile didn't kill them."
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 319251762602010,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 167548785714291,
											"parameters": {
												"instance-variable": "hit",
												"value": "true"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 546959138221891,
											"parameters": {
												"animation": "\"hit_\" & enemy.degrees",
												"from": "beginning"
											}
										}
									],
									"sid": 274471392484519
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "projectile",
									"sid": 921224045921521,
									"parameters": {
										"object": "player"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "projectile",
									"sid": 748826451704647,
									"parameters": {
										"instance-variable": "friendly"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 591454218470020,
							"children": [
								{
									"eventType": "variable",
									"name": "playerHealthBeforeImpact",
									"type": "number",
									"initialValue": "0",
									"comment": "The player's health before the projectile hit them.",
									"isStatic": true,
									"isConstant": false,
									"sid": 386149964426580
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 590785792254548,
											"parameters": {
												"object": "gear",
												"expression": "gear.type",
												"comparison": 0,
												"value": "\"offHand\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 304888180753921,
											"parameters": {
												"instance-variable": "blockChance",
												"comparison": 5,
												"value": "floor(random(1, 100))"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If the player has an offHand item equipped, and successfully blocks the attack, just play the block animation, then we're done."
										},
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 556447635135862,
											"behaviorType": "MoveTo"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 760840983808363,
											"parameters": [
												"\"hit\"",
												"body.OriginalAnimationSpeed",
												"\"playFromBeginning\""
											]
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 579894924986931,
											"parameters": {
												"group-name": "\"movement and interaction\"",
												"state": "deactivated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 860296996828843,
											"parameters": {
												"group-name": "\"abilities\"",
												"state": "deactivated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 142003343369403,
											"parameters": {
												"group-name": "\"facings\"",
												"state": "deactivated"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 476709922183398,
											"parameters": {
												"seconds": "body.AnimationFrameCount / TICKS_PER_SECOND"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 973884488229170,
											"parameters": {
												"group-name": "\"movement and interaction\"",
												"state": "activated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 315081026583378,
											"parameters": {
												"group-name": "\"facings\"",
												"state": "activated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 136858173420865,
											"parameters": {
												"group-name": "\"abilities\"",
												"state": "activated"
											}
										},
										{
											"callFunction": "updateAnimations",
											"sid": 352952423644342,
											"parameters": [
												"\"idle\"",
												"body.OriginalAnimationSpeed",
												"\"playFromBeginning\""
											]
										}
									],
									"sid": 661315679644106
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 212609481973178
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If the projectile didn't get blocked..."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 705146640200271,
											"parameters": {
												"variable": "playerHealthBeforeImpact",
												"value": "player.currentHealth"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 893185114435343,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.lightningDamage * (1 - Self.lightningResistance)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 132008705769330,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.stabDamage * (1 - Self.physicalResistance)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 226885000296688,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.slashDamage * (1 - Self.physicalResistance)"
											}
										}
									],
									"sid": 680787690708581,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 353087544354699,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 2,
														"value": "playerHealthBeforeImpact - Self.maxHealth * Self.hitstunThreshold"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 884911017862546,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the player takes a hit that doesn't kill him, and is bigger than the hitstun threshold, the player gets hitstunned"
												},
												{
													"type": "comment",
													"text": "TODO: Attributes for the player"
												},
												{
													"id": "stop",
													"objectClass": "player",
													"sid": 136521454217483,
													"behaviorType": "MoveTo"
												},
												{
													"callFunction": "updateAnimations",
													"sid": 731763162954510,
													"parameters": [
														"\"hit\"",
														"body.OriginalAnimationSpeed",
														"\"playFromBeginning\""
													]
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 268058627296574,
													"parameters": {
														"group-name": "\"movement and interaction\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 945243391916501,
													"parameters": {
														"group-name": "\"abilities\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 989960851543694,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "deactivated"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 284846129494154,
													"parameters": {
														"seconds": "body.AnimationFrameCount / TICKS_PER_SECOND"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 594437180270154,
													"parameters": {
														"group-name": "\"movement and interaction\"",
														"state": "activated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 348777597644303,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "activated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 613360317053683,
													"parameters": {
														"group-name": "\"abilities\"",
														"state": "activated"
													}
												},
												{
													"callFunction": "updateAnimations",
													"sid": 366611295429989,
													"parameters": [
														"\"idle\"",
														"body.OriginalAnimationSpeed",
														"\"playFromBeginning\""
													]
												}
											],
											"sid": 181406029233488
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "projectile",
													"sid": 558866989360890,
													"parameters": {
														"instance-variable": "piercing"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "projectile",
													"sid": 887800632849253
												}
											],
											"sid": 944725340629196
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 725204103231325
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "misc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "FixedDistanceAlongLineX",
					"functionDescription": "Find the X coordinate of a point that's along a line between 2 points, a specified distance away from the 2nd point.",
					"functionCategory": "movement",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Point1X",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 194825641577749
						},
						{
							"name": "Point1Y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 652129556671674
						},
						{
							"name": "Point2X",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 991289962500125
						},
						{
							"name": "Point2Y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 572393264354176
						},
						{
							"name": "distanceAwayFromPoint2",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 563778760135197
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 971097400569170,
							"parameters": {
								"value": "Point2X + cos(angle(Point2X, Point2Y, Point1X, Point1Y)) * distanceAwayFromPoint2"
							}
						}
					],
					"sid": 218715847150785
				},
				{
					"functionName": "FixedDistanceAlongLineY",
					"functionDescription": "Find the Y coordinate of a point that's along a line between 2 points, a specified distance away from the 2nd point.",
					"functionCategory": "movement",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Point1X",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 525553611518981
						},
						{
							"name": "Point1Y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 180004656787523
						},
						{
							"name": "Point2X",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 265677891104867
						},
						{
							"name": "Point2Y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 649636229779968
						},
						{
							"name": "distanceAwayFromPoint2",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 203408354532086
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 913503751618676,
							"parameters": {
								"value": "Point2Y + sin(angle(Point2X, Point2Y, Point1X, Point1Y)) * distanceAwayFromPoint2"
							}
						}
					],
					"sid": 812931055253938
				},
				{
					"functionName": "isometrify",
					"functionDescription": "Modify a value based on an angle, to make it isometrically correct.",
					"functionCategory": "Isometry",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "value",
							"type": "number",
							"initialValue": "0",
							"comment": "The speed, which will be modified by the specified angle.",
							"sid": 686725352825470
						},
						{
							"name": "nAngle",
							"type": "number",
							"initialValue": "0",
							"comment": "The angle, which will be used to modify the speed.",
							"sid": 539771032584735
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "\"nAngle\" because \"angle\" is a reserved keyword."
						},
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 410065321337001,
							"parameters": {
								"value": "value * lerp(.5, 1, abs(abs(nAngle) - QUARTER_CIRCLE) / QUARTER_CIRCLE)"
							}
						}
					],
					"sid": 230942831711372
				},
				{
					"functionName": "arrayLookup",
					"functionDescription": "look up a value in an array",
					"functionCategory": "data",
					"functionReturnType": "string",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "array",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 138615066068748
						},
						{
							"name": "sourceColumn",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 749816088821036
						},
						{
							"name": "valueToFind",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 918344827624248
						},
						{
							"name": "targetColumn",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 291672800255140
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 787369920357309,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "array"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "pick the array that was passed (the calling event might not pick it, so we can't use \"copy picked\")"
						}
					],
					"sid": 643674845440053,
					"children": [
						{
							"eventType": "variable",
							"name": "targetColumnNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 559595863195308
						},
						{
							"eventType": "variable",
							"name": "sourceColumnNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 959500024424395
						},
						{
							"eventType": "variable",
							"name": "returnValue",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 148176261089754
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "queriedArrays",
									"sid": 165803417552242,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "loop through the column headers to find the columns we want"
								},
								{
									"type": "comment",
									"text": "\"stop loop\" doesn't work with the array loops. using a standard loop with arrays.width wasn't working either for some reason"
								}
							],
							"sid": 946216334824181,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-current-value",
											"objectClass": "queriedArrays",
											"sid": 540675478633314,
											"parameters": {
												"comparison": 0,
												"value": "sourceColumn"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "this line cannot be combined into the previous line"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 870520498246570,
											"parameters": {
												"variable": "sourceColumnNumber",
												"value": "queriedArrays.CurX"
											}
										}
									],
									"sid": 660086940294346
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-current-value",
											"objectClass": "queriedArrays",
											"sid": 265769457322804,
											"parameters": {
												"comparison": 0,
												"value": "targetColumn"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 148872933326070,
											"parameters": {
												"variable": "targetColumnNumber",
												"value": "queriedArrays.CurX"
											}
										}
									],
									"sid": 567741713139032
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 572601404125749,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "queriedArrays.Height"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 628104764048334,
									"parameters": {
										"first-value": "queriedArrays.At(sourceColumnNumber, loopindex)",
										"comparison": 0,
										"second-value": "valueToFind"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "loop through the cells of just that column to find the value we want, skipping the header row. Once we find it, set returnValue to the value of the cell located in that row but column of targetColumnNumber"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 134057885551602,
									"parameters": {
										"variable": "returnValue",
										"value": "queriedArrays.At(targetColumnNumber, loopindex)"
									}
								}
							],
							"sid": 895434417246662,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 956672283334857,
											"parameters": {
												"first-value": "returnValue",
												"comparison": 1,
												"second-value": "\"\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "once we have a return value, stop the loop (we're not sure if setting a return value also ends the function)"
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 596610162597647
										},
										{
											"id": "set-function-return-value",
											"objectClass": "Functions",
											"sid": 211056130340703,
											"parameters": {
												"value": "returnValue"
											}
										}
									],
									"sid": 721602884260980
								}
							]
						}
					]
				},
				{
					"functionName": "getColumnNumber",
					"functionDescription": "Find the column number of a column by its name",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "array",
							"type": "string",
							"initialValue": "",
							"comment": "The array in which to find the column name and number",
							"sid": 417535318627685
						},
						{
							"name": "columnName",
							"type": "string",
							"initialValue": "",
							"comment": "The column name for which the number is needed",
							"sid": 535319316146738
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 969157735323348,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "array"
							}
						},
						{
							"id": "for-each-element",
							"objectClass": "queriedArrays",
							"sid": 809142578541249,
							"parameters": {
								"axes": "x"
							}
						},
						{
							"id": "compare-current-value",
							"objectClass": "queriedArrays",
							"sid": 807903728824992,
							"parameters": {
								"comparison": 0,
								"value": "columnName"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 874778872234686,
							"parameters": {
								"value": "queriedArrays.CurX"
							}
						}
					],
					"sid": 454046452601444
				},
				{
					"functionName": "getSheetNumber",
					"functionDescription": "Find the number of a sheet by its name",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "nameArray",
							"type": "string",
							"initialValue": "",
							"comment": "The array which contains the names of the sheets",
							"sid": 698802982475783
						},
						{
							"name": "value",
							"type": "string",
							"initialValue": "",
							"comment": "The value that we want the sheet of",
							"sid": 219389862100279
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 435052508819299,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "nameArray"
							}
						},
						{
							"id": "for-each-element",
							"objectClass": "queriedArrays",
							"sid": 587115061092778,
							"parameters": {
								"axes": "xy"
							}
						},
						{
							"id": "compare-current-value",
							"objectClass": "queriedArrays",
							"sid": 480528147530679,
							"parameters": {
								"comparison": 0,
								"value": "value"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 166673294832581,
							"parameters": {
								"value": "queriedArrays.CurY"
							}
						}
					],
					"sid": 850952352225054
				}
			],
			"sid": 864124535956996
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "initialization",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 763501423126985,
							"parameters": {
								"variable": "characterLoaded"
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 352829548225660,
							"parameters": {
								"variable": "dataLoaded"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "TODO: We will need to rework these to kick off one after another. We already had issues with abilities being set before the player was made. Need to figure out how we're spawning props first"
						}
					],
					"sid": 741802595166358,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 871368170341139
								}
							],
							"actions": [
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 605845851663143,
									"parameters": {
										"tag": "\"setAbilities\""
									}
								}
							],
							"sid": 527343560270373
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 470592211562367,
									"parameters": {
										"variable": "enemiesLoaded"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 911942656771529,
									"parameters": {
										"variable": "npcsLoaded"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 565303113216660
								}
							],
							"actions": [],
							"sid": 787722674281662,
							"children": [
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "TODO: Make sure shadows have loaded as well"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 700717741751226,
											"parameters": {
												"seconds": "2"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 507210800219085
										},
										{
											"id": "tween-one-property",
											"objectClass": "loadingScreen",
											"sid": 973985680322674,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": ".5",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 231564462980452
										},
										{
											"id": "tween-one-property",
											"objectClass": "fader",
											"sid": 778251859566007,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": ".5",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 374178553794278
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 544131833982854,
											"parameters": {
												"layer": "\"main\"",
												"interactive": true
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 783922198661304,
											"parameters": {
												"layer": "\"background\"",
												"interactive": true
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 163343496542181,
											"parameters": {
												"layer": "\"abilityBar\"",
												"interactive": true
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 874159226624380,
											"parameters": {
												"layer": "\"orbs\"",
												"interactive": true
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 148207732624483,
											"parameters": {
												"layer": "\"mechanics\"",
												"interactive": true
											}
										}
									],
									"sid": 407955171048823
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 941749606927713
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 436750008434429,
							"parameters": {
								"tag": "\"startLoading\""
							}
						}
					],
					"sid": 369342543213166
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 641566405849024,
							"parameters": {
								"tag": "\"startLoading\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "load and parse out data"
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 643583976543378,
							"parameters": {
								"tag": "\"dialog\"",
								"file": "npcDialog.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 538486492364201
						},
						{
							"id": "load",
							"objectClass": "npcDialogArray",
							"sid": 995578618712741,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 710945861120802,
							"parameters": {
								"tag": "\"abilities\"",
								"file": "abilities.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 788174360714570
						},
						{
							"id": "load",
							"objectClass": "abilitiesArray",
							"sid": 608578720052768,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 920440186593964,
							"parameters": {
								"tag": "\"enemies\"",
								"file": "enemies.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 903011922692493
						},
						{
							"id": "load",
							"objectClass": "enemiesArray",
							"sid": 894468445598159,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 354747158044542,
							"parameters": {
								"name": "\"enemies\""
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 497113787435464,
							"parameters": {
								"tag": "\"equipment\"",
								"file": "equipment.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 750608439134245
						},
						{
							"id": "load",
							"objectClass": "equipmentArray",
							"sid": 172105989325916,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 926959556837082,
							"parameters": {
								"name": "\"equipment\""
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 517928590083291,
							"parameters": {
								"tag": "\"mods\"",
								"file": "mods.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 215027585354868
						},
						{
							"id": "load",
							"objectClass": "modsArray",
							"sid": 326626465371332,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 817865350352474,
							"parameters": {
								"tag": "\"modRelationships\"",
								"file": "modRelationships.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 420080757435607
						},
						{
							"id": "load",
							"objectClass": "modRelationshipsArray",
							"sid": 946746743767847,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 159389144809897,
							"parameters": {
								"name": "\"modValues\""
							}
						},
						{
							"type": "comment",
							"text": "map function mods - equipment mods"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 247179058728032,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatHealth\"",
								"function": "flatHealth"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 201741876481201,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSlash\"",
								"function": "flatSlash"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 124373662697521,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatStab\"",
								"function": "flatStab"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 490800972305279,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSmash\"",
								"function": "flatSmash"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 636426569416839,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatBlockChance\"",
								"function": "flatBlockChance"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 549595640272861,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatManaRegen\"",
								"function": "flatManaRegen"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 686238726133757,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSlashAndStab\"",
								"function": "flatSlashAndStab"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 352238979016024,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatPhysical\"",
								"function": "flatPhysical"
							}
						},
						{
							"type": "comment",
							"text": "map function mods - player abilities"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 237132220068185,
							"parameters": {
								"name": "\"playerAbilities\"",
								"string": "\"basicAttack\"",
								"function": "basicAttack"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 394529823473024,
							"parameters": {
								"name": "\"playerAbilities\"",
								"string": "\"heroicStrike\"",
								"function": "heroicStrike"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 285445435943423,
							"parameters": {
								"name": "\"playerAbilities\"",
								"string": "\"kick\"",
								"function": "kick"
							}
						},
						{
							"type": "comment",
							"text": "map function mods - enemy abilities"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 318266161970046,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinUnderling\"",
								"function": "goblinUnderling"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 811409482361320,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinWarlock\"",
								"function": "goblinWarlock"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 746424719092194,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinArcher\"",
								"function": "goblinArcher"
							}
						}
					],
					"sid": 532995399136102,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 569494377044820,
									"parameters": {
										"name": "\"enemies\""
									}
								}
							],
							"sid": 112170896522901
						},
						{
							"eventType": "comment",
							"text": "Using a system loop is faster than the array loop here because we don't need to loop over XY, only Y, which isn't possible with array loop"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 858278599151536,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "enemiesArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"id": "addProbabilityEntry",
									"objectClass": "advancedRandom",
									"sid": 569790593755369,
									"parameters": {
										"value": "enemiesArray.At(Functions.getColumnNumber(enemiesArray.ObjectTypeName, \"simpleName\"), loopindex)",
										"weight": "enemiesArray.At(Functions.getColumnNumber(enemiesArray.ObjectTypeName, \"rarity\"), loopindex)"
									}
								}
							],
							"sid": 391512807391587
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 565101366090050,
									"parameters": {
										"tag": "\"generateEnemies\""
									}
								}
							],
							"sid": 914594101330032
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 527201751585900,
									"parameters": {
										"name": "\"equipment\""
									}
								}
							],
							"sid": 537651463997366
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 161277702824369,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "equipmentArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"id": "addProbabilityEntry",
									"objectClass": "advancedRandom",
									"sid": 462161066233346,
									"parameters": {
										"value": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"simpleName\"), loopindex)",
										"weight": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"rarity\"), loopindex)"
									}
								}
							],
							"sid": 363609991636586
						},
						{
							"eventType": "variable",
							"name": "modTableName",
							"type": "string",
							"initialValue": "",
							"comment": "The name of the modTable to create and use",
							"isStatic": true,
							"isConstant": false,
							"sid": 153722454041510
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 938268666012959,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "equipmentArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Populate the modTableNamesArray with the values from the modTable column in the equipmentArray"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 819998973144750,
									"parameters": {
										"variable": "modTableName",
										"value": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"modTable\"), loopindex)"
									}
								}
							],
							"sid": 331050158213265,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "contains-value",
											"objectClass": "modTableNamesArray",
											"sid": 624586429993127,
											"parameters": {
												"value": "modTableName"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "push",
											"objectClass": "modTableNamesArray",
											"sid": 985549320205467,
											"parameters": {
												"where": "back",
												"value": "modTableName",
												"axis": "x"
											}
										}
									],
									"sid": 342490949321196
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "modTableNamesArray",
									"sid": 969967315228306,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 429144231082775,
									"parameters": {
										"variable": "modTableName",
										"value": "modTableNamesArray.CurValue"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 643690238625194,
									"parameters": {
										"name": "modTableName"
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 269998747673991,
									"parameters": {
										"name": "modTableName"
									}
								}
							],
							"sid": 266387431749440,
							"children": [
								{
									"eventType": "variable",
									"name": "modName",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 895817371529010
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 924261551291335,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "modRelationshipsArray.Height - 1"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 740429727234499,
											"parameters": {
												"first-value": "modRelationshipsArray.At(Functions.getColumnNumber(modRelationshipsArray.ObjectTypeName, \"modTableName\"), loopindex)",
												"comparison": 0,
												"second-value": "modTableName"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 410438335810045,
											"parameters": {
												"variable": "modName",
												"value": "modRelationshipsArray.At(Functions.getColumnNumber(modRelationshipsArray.ObjectTypeName, \"mod\"), loopindex)"
											}
										},
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 852474257247651,
											"parameters": {
												"value": "modName",
												"weight": "int(Functions.arrayLookup(modsArray.ObjectTypeName, \"simpleName\", modName, \"rarity\"))"
											}
										}
									],
									"sid": 724785017388781
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 381002642022937,
									"parameters": {
										"variable": "dataLoaded",
										"value": "true"
									}
								}
							],
							"sid": 582145504896098
						}
					]
				}
			],
			"sid": 507296452024802
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "mods",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "manageMods",
					"functionDescription": "activate or deactivate the mods of an item to the player",
					"functionCategory": "mods",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "whether or not to activate or deactivate this mod",
							"sid": 608758543573668
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 502769143658461,
					"children": [
						{
							"eventType": "variable",
							"name": "mod",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 675202259414484
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 195257844547582,
									"parameters": {
										"name": "\"\"",
										"start-index": "0",
										"end-index": "tokencount(item.mods, \";\") - 2"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 144624815497568,
									"parameters": {
										"variable": "mod",
										"value": "tokenat(item.mods, loopindex, \";\")"
									}
								}
							],
							"sid": 867779511144806,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 468135131817932,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"callFunction": "modCaller",
											"sid": 828874850314975,
											"parameters": [
												true,
												"tokenat(mod, 1, \":\")",
												"tokenat(mod, 0, \":\")"
											]
										}
									],
									"sid": 931958845924383
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 797626541149464
										}
									],
									"actions": [
										{
											"callFunction": "modCaller",
											"sid": 735049010108810,
											"parameters": [
												false,
												"tokenat(mod, 1, \":\")",
												"tokenat(mod, 0, \":\")"
											]
										}
									],
									"sid": 218511279335757
								}
							]
						}
					]
				},
				{
					"functionName": "modCaller",
					"functionDescription": "Intermediary function to call a mod function.",
					"functionCategory": "mods",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 185032068040398
						},
						{
							"name": "modDescription",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 668551496321785
						},
						{
							"name": "ModName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 563496748576604
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "call-mapped-function",
							"objectClass": "Functions",
							"sid": 314460352638117,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "modName",
								"forward-params": "0"
							}
						}
					],
					"sid": 899772844374345
				},
				{
					"functionName": "getValueFromMod",
					"functionDescription": "returns the Nth text value found inside the specified mod description",
					"functionCategory": "mods",
					"functionReturnType": "any",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "mod",
							"type": "string",
							"initialValue": "",
							"comment": "the mod description from which to extract the string",
							"sid": 615512659832660
						},
						{
							"name": "index",
							"type": "number",
							"initialValue": "0",
							"comment": "the index of the value to extract",
							"sid": 799799702803442
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 231109643138954,
							"parameters": {
								"value": "RegexReplace(RegexMatchAt(mod, \"\\{.*?\\}\", \"g\", index), \"\\{|}\", \"g\", \"\")"
							}
						}
					],
					"sid": 320744027056050
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "mod functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "flatHealth",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 570253738943713
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 307511183096554
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 444193088646752,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 263274720117195
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 695155855001729,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 534777214177807
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 259894643029231,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 197132544744124,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "value"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 778544303269221,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "value"
											}
										}
									],
									"sid": 942509778023512
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 465894261465579
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "prevent removing this mod from killing the player"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 234393131366957,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "clamp(Self.currentHealth - value, 1, Self.maxHealth)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 429082425325855,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "value"
											}
										}
									],
									"sid": 122281662245358
								}
							]
						},
						{
							"functionName": "flatSlash",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 902260859033184
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 824779299585551
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 485337182466415,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 114515034340047
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 363740006116352,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 777594694730042
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 594579713986562,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 284955818513996,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										}
									],
									"sid": 100630951832736
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 578322709621714
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 860832872719684,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										}
									],
									"sid": 843155040696154
								}
							]
						},
						{
							"functionName": "flatStab",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 795247527844535
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 195992795428678
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 428722222280473,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 134117444559985
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 966143064087912,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 836654181109835
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 124294150702013,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 299665220624183,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value"
											}
										}
									],
									"sid": 310036445399785
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 588054324025359
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 110376256430086,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value"
											}
										}
									],
									"sid": 915180563061296
								}
							]
						},
						{
							"functionName": "flatSlashAndStab",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 486814130079463
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 113661033345682
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 856050339528452,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 810736970502754
								},
								{
									"eventType": "variable",
									"name": "value2",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 472590266064672
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 595553801627760,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 485531725133262,
											"parameters": {
												"variable": "value2",
												"value": "Functions.getValueFromMod(modDescription, 1)"
											}
										}
									],
									"sid": 257923106845929
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 509733711440273,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 953003764567580,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 182117520102904,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value2"
											}
										}
									],
									"sid": 333950422080430
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 789420711930422
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 380230977470890,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 625265836678152,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value2"
											}
										}
									],
									"sid": 163550454082777
								}
							]
						},
						{
							"functionName": "flatSmash",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 677819658597203
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 412305460215976
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 233218428812949,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 190596318771045
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 862743270532982,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 415952678182173
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 437744311338199,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 125990175741193,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "value"
											}
										}
									],
									"sid": 192060783652640
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 518410678394064
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 863032040703286,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "value"
											}
										}
									],
									"sid": 672711044894469
								}
							]
						},
						{
							"functionName": "flatBlockChance",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 442129090983909
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 892096715698480
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 346081716829858,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 342503026746160
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 665873668250678,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 504155363810469
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 593334773718544,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 250993466607563,
											"parameters": {
												"instance-variable": "blockChance",
												"value": "value"
											}
										}
									],
									"sid": 366342256423378
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 537242814208340
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 513624251503529,
											"parameters": {
												"instance-variable": "blockChance",
												"value": "value"
											}
										}
									],
									"sid": 717615008279974
								}
							]
						},
						{
							"functionName": "flatManaRegen",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 620809625623140
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 771057121423808
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 618432132660579,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 379334632151382
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 843414371578072,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 109070798439151
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 150944168713245,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 311392191049775,
											"parameters": {
												"instance-variable": "manaRegen",
												"value": "value"
											}
										}
									],
									"sid": 968321874689214
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 437016688859259
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 715372430908789,
											"parameters": {
												"instance-variable": "manaRegen",
												"value": "value"
											}
										}
									],
									"sid": 143811748396171
								}
							]
						},
						{
							"functionName": "flatPhysical",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 499944774915861
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 989673922363299
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 402192560156812,
							"children": [
								{
									"eventType": "variable",
									"name": "damageType",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 313882942019148
								},
								{
									"eventType": "variable",
									"name": "amount",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 506829206640632
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 957382791527811,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 178928919487212,
											"parameters": {
												"variable": "amount",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 716939391397843,
											"parameters": {
												"variable": "damageType",
												"value": "Functions.getValueFromMod(modDescription, 1)"
											}
										}
									],
									"sid": 460177480565386,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 647009878134427,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Slash\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 307075666247828,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 899029722355018
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 516156131856547,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Smash\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 674040280899441,
													"parameters": {
														"instance-variable": "smashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 605145294202577
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 148266729061949,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Stab\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 640283016435828,
													"parameters": {
														"instance-variable": "stabDamage",
														"value": "amount"
													}
												}
											],
											"sid": 469788707024177
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 121694386698797
										}
									],
									"actions": [],
									"sid": 869658595429510,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 649960748686757,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Slash\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 418488349775888,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 158186614004615
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 637874891029247,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Smash\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 723880095772861,
													"parameters": {
														"instance-variable": "smashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 735778638523005
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 347103955837597,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Stab\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 844156788201573,
													"parameters": {
														"instance-variable": "stabDamage",
														"value": "amount"
													}
												}
											],
											"sid": 171575061019100
										}
									]
								}
							]
						}
					],
					"sid": 640233763055874
				}
			],
			"sid": 368443066853777
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "environment",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "mouse",
							"sid": 212487329704118,
							"parameters": {
								"object": "door"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "door",
							"sid": 285583430795064,
							"parameters": {
								"animation": "\"open\"",
								"from": "current-frame"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "door",
							"sid": 183373806402720,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "105"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 808797388754580,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 120141362090610,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 991839766226039
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 449281099921006
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "door",
							"sid": 888366485508554,
							"parameters": {
								"animation": "\"close\"",
								"from": "current-frame"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "door",
							"sid": 335527086862279,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "100"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 809827324346415,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 735079784184243,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 348574872578129
				},
				{
					"functionName": "buildingTransition",
					"functionDescription": "Move the player in and out of a building.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "player",
							"sid": 306084288011336,
							"parameters": {
								"x": "door.relocateToX",
								"y": "door.relocateToY"
							}
						},
						{
							"id": "stop",
							"objectClass": "player",
							"sid": 428990218376500,
							"behaviorType": "MoveTo"
						},
						{
							"callFunction": "updateAnimations",
							"sid": 516172736720725,
							"parameters": [
								"\"idle\"",
								"body.OriginalAnimationSpeed",
								"\"playFromBeginning\""
							]
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 210074657667276,
							"parameters": {
								"variable": "isOnInteractCooldown",
								"value": "true"
							}
						}
					],
					"sid": 605751022796155,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "player",
									"sid": 383444319400282,
									"parameters": {
										"object": "background"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if the player is now overlapping the background, they're back in the main area, and not in a building"
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "player",
									"sid": 233530060981134,
									"parameters": {
										"instance-variable": "isInsideBuilding",
										"value": "false"
									}
								}
							],
							"sid": 557921840107408
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 654018853199339
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if they're not overlapping the background, they're now in a building"
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "player",
									"sid": 884524246634332,
									"parameters": {
										"instance-variable": "isInsideBuilding",
										"value": "true"
									}
								}
							],
							"sid": 549145578319639
						}
					]
				}
			],
			"sid": 992252066588856
		}
	],
	"sid": 318845921999986
}